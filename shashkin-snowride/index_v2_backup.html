<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnowRide - –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–Ω–µ–≥–æ—Ö–æ–¥–Ω—ã–π —Ä–∞–Ω–Ω–µ—Ä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        
        body, html {
            overflow: hidden;
            width: 100%;
            height: 100%;
            background: #0a0a2a;
            font-family: 'Arial', sans-serif;
            color: white;
        }
        
        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameCanvas {
            display: block;
            background: #0a0a2a;
            border-radius: 4px;
        }
        
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }
        
        #score {
            color: #4fc3f7;
        }
        
        #speed {
            color: #69f0ae;
            font-size: 18px;
            margin-top: 5px;
        }
        
        #jumpButton {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: rgba(79, 195, 247, 0.7);
            border: 4px solid white;
            color: white;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            transition: all 0.1s;
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.5);
            opacity: 0.9;
            touch-action: manipulation;
        }
        
        #jumpButton:active {
            transform: scale(0.95);
            background: rgba(79, 195, 247, 1);
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10, 10, 42, 0.95);
            z-index: 20;
        }
        
        #startScreen {
            text-align: center;
            padding: 20px;
        }
        
        #gameOverScreen {
            display: none;
        }
        
        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.7);
        }
        
        h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #ff5252;
        }
        
        .screen p {
            font-size: 20px;
            margin-bottom: 30px;
            max-width: 80%;
            line-height: 1.5;
        }
        
        .button {
            padding: 15px 40px;
            font-size: 22px;
            font-weight: bold;
            background: linear-gradient(to bottom, #4fc3f7, #0288d1);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .button:active {
            transform: translateY(1px);
        }
        
        .controls {
            margin-top: 30px;
            font-size: 18px;
            color: #bbbbbb;
        }
        
        #highScore {
            color: #ffeb3b;
            font-size: 28px;
            margin-top: 10px;
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 36px; }
            h2 { font-size: 28px; }
            #hud { font-size: 20px; }
            #jumpButton {
                width: 100px;
                height: 100px;
                font-size: 18px;
            }
        }
        
        @media (max-height: 600px) {
            #jumpButton {
                bottom: 15px;
                right: 15px;
                width: 80px;
                height: 80px;
                font-size: 16px;
            }
        }
        
        /* –ü–æ—Ä—Ç—Ä–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º */
        @media (orientation: portrait) {
            #jumpButton {
                bottom: 10vh;
                width: 80px;
                height: 80px;
                font-size: 16px;
            }
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #4fc3f7;
            z-index: 30;
            display: none;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div id="hud">
            <div id="score">–°—á—ë—Ç: 0</div>
            <div id="speed">–°–∫–æ—Ä–æ—Å—Ç—å: 1.0x</div>
        </div>
        
        <button id="jumpButton">–ü–†–´–ñ–û–ö</button>
        
        <div id="startScreen" class="screen">
            <h1>‚ùÑÔ∏è SnowRide ‚ùÑÔ∏è</h1>
            <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–Ω–µ–≥–æ—Ö–æ–¥–æ–º, –ø—Ä—ã–≥–∞–π—Ç–µ —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –∏ —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø—Ä–æ–µ—Ö–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –¥–∞–ª—å—à–µ!</p>
            <p style="color: #69f0ae; font-size: 16px;">–ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ - –Ω–∏–∑–∫–∏–π –ø—Ä—ã–∂–æ–∫<br>–î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ - –≤—ã—Å–æ–∫–∏–π –ø—Ä—ã–∂–æ–∫</p>
            <button id="startButton" class="button">–°–¢–ê–†–¢</button>
            <div class="controls">
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–†–û–ë–ï–õ, –°–¢–†–ï–õ–ö–ê –í–í–ï–†–•, –ö–õ–ò–ö –∏–ª–∏ –ö–ù–û–ü–ö–ê –ü–†–´–ñ–ö–ê<br>
                –õ—É—á—à–∏–π —Å—á—ë—Ç: <span id="bestScore">0</span>
            </div>
        </div>
        
        <div id="gameOverScreen" class="screen">
            <h2>–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
            <p>–í–∞—à —Å—á—ë—Ç: <span id="finalScore">0</span></p>
            <p>–õ—É—á—à–∏–π —Å—á—ë—Ç: <span id="highScore">0</span></p>
            <button id="restartButton" class="button">–ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
        </div>
        
        <div id="loading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...</div>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã DOM
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const speedElement = document.getElementById('speed');
        const jumpButton = document.getElementById('jumpButton');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const finalScoreElement = document.getElementById('finalScore');
        const highScoreElement = document.getElementById('highScore');
        const bestScoreElement = document.getElementById('bestScore');
        const loadingElement = document.getElementById('loading');

        // === –ù–ê–°–¢–†–ê–ò–í–ê–ï–ú–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ ===
        const SCALING_CONFIG = {
            baseWidth: 1000,
            baseHeight: 600,
            playerScale: 1.7,
            obstacleScale: 1.0,
            particleScale: 1.0,
            autoScale: true,
            minScale: 0.7,
            maxScale: 1.5,
        };

        const GAME_CONFIG = {
            playerX: 250,
            gravity: 0.6,
            jumpForce: {
                short: -12,    // –ö–æ—Ä–æ—Ç–∫–∏–π –ø—Ä—ã–∂–æ–∫
                long: -18      // –î–ª–∏–Ω–Ω—ã–π –ø—Ä—ã–∂–æ–∫
            },
            maxJumpHoldTime: 70, // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä—ã–∂–∫–∞ (–º—Å)
            baseSpeed: 6,
            speedIncreaseRate: 0.0002,
            terrainSegmentLength: 70,
            terrainHeightVariation: 80,
            terrainBaseHeight: 0.75,
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            difficulty: {
                initialObstacleChance: 0.015,
                maxObstacleChance: 0.035,
                initialMinDistance: 400,
                finalMinDistance: 200,
                difficultyIncreaseDistance: 5000,
                obstacleTypes: ['snowHeap', 'snowball', 'tree', 'hare', 'rock', 'log']
            },
            
            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 300 –æ—á–∫–æ–≤
            speedBoostInterval: 300,
            speedBoostMultiplier: 1.3, // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∫–æ—Ä–µ–Ω–∏—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
            
            starCount: 200,
            mountainLayers: 4,
            mountainsPerLayer: 6,
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ø—Ä–∞–π—Ç–∞ —Å–Ω–µ–≥–æ—Ö–æ–¥–∞
            snowmobileSprite: {
                columns: 4,
                rows: 6,
                totalFrames: 24,
                frameDuration: 40 // –º—Å –Ω–∞ –∫–∞–¥—Ä (25 FPS)
            },
            
            // === –ù–ê–°–¢–†–û–ô–ö–ò –ë–£–§–ï–†–ù–û–ô –ó–û–ù–´ –î–õ–Ø –ö–û–õ–õ–ò–ó–ò–ô ===
            // –ë—É—Ñ–µ—Ä–Ω–∞—è –∑–æ–Ω–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "–º–≥–Ω–æ–≤–µ–Ω–Ω—É—é —Å–º–µ—Ä—Ç—å" –ø—Ä–∏ –º–∞–ª–µ–π—à–µ–º –∫–∞—Å–∞–Ω–∏–∏
            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –¥–µ–ª–∞–µ—Ç –∏–≥—Ä—É –ª–µ–≥—á–µ, —É–º–µ–Ω—å—à–µ–Ω–∏–µ - —Å–ª–æ–∂–Ω–µ–µ
            collisionBuffer: {
                playerBuffer: -10,      // –ë—É—Ñ–µ—Ä –¥–ª—è –∏–≥—Ä–æ–∫–∞ (–ø–∏–∫—Å–µ–ª–∏)
                obstacleBuffer: -1,   // –ë—É—Ñ–µ—Ä –¥–ª—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (–ø–∏–∫—Å–µ–ª–∏) 
                enablePlayerBuffer: true,   // –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –¥–ª—è –∏–≥—Ä–æ–∫–∞
                enableObstacleBuffer: true, // –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –¥–ª—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
                
                // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:
                // playerBuffer: –î–æ–±–∞–≤–ª—è–µ—Ç "–Ω–µ–≤–∏–¥–∏–º—É—é –∑–æ–Ω—É" –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
                // obstacleBuffer: –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –¥–ª—è –∫–æ–ª–ª–∏–∑–∏–π
                // –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 5-15 –ø–∏–∫—Å–µ–ª–µ–π –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π –∏–≥—Ä—ã
                
                // –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –±—É—Ñ–µ—Ä—ã:
                customBuffers: {
                    snowHeap: 6,    // –°—É–≥—Ä–æ–±—ã - —Å—Ä–µ–¥–Ω–∏–π –±—É—Ñ–µ—Ä
                    snowball: 8,    // –°–Ω–µ–∂–∫–∏ - –±–æ–ª—å—à–∏–π –±—É—Ñ–µ—Ä (–∫—Ä—É–≥–ª—ã–µ)
                    tree: 4,        // –î–µ—Ä–µ–≤—å—è - –º–∞–ª–µ–Ω—å–∫–∏–π –±—É—Ñ–µ—Ä
                    hare: 10,       // –ó–∞–π—Ü—ã - –±–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä (–∂–∏–≤–æ—Ç–Ω—ã–µ)
                    rock: 3,        // –ö–∞–º–Ω–∏ - –º–∞–ª–µ–Ω—å–∫–∏–π –±—É—Ñ–µ—Ä
                    log: 5          // –ë—Ä–µ–≤–Ω–∞ - —Å—Ä–µ–¥–Ω–∏–π –±—É—Ñ–µ—Ä
                }
            }
        };

        // === –ü–û–î–†–û–ë–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ò –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ù–ê–°–¢–†–û–ô–ö–ï ===
        
        /*
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë                           SNOWRIDE - –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ù–ê–°–¢–†–û–ô–ö–ï                    ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        
        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ SnowRide! –≠—Ç–∞ –∏–≥—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π 
        –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–∞–Ω–Ω–µ—Ä –ø—Ä–æ —Å–Ω–µ–≥–æ—Ö–æ–¥ —Å –±–æ–≥–∞—Ç–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                              –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò                              ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        1. –ù–ê–°–¢–†–û–ô–ö–ò –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø (SCALING_CONFIG)
        
        ‚Ä¢ baseWidth, baseHeight: –ë–∞–∑–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è (1000x600)
        ‚Ä¢ playerScale, obstacleScale, particleScale: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
        ‚Ä¢ autoScale: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
        ‚Ä¢ minScale, maxScale: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–± (0.7-1.5)
        
        –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
        - –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è autoScale: true
        - –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å autoScale: false –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
        - –ò–∑–º–µ–Ω–µ–Ω–∏–µ baseWidth/baseHeight –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—â—É—é –≥–µ–æ–º–µ—Ç—Ä–∏—é –∏–≥—Ä—ã
        
        2. –ù–ê–°–¢–†–û–ô–ö–ò –ò–ì–†–û–í–û–ô –ú–ï–•–ê–ù–ò–ö–ò (GAME_CONFIG)
        
        ‚îå‚îÄ –î–í–ò–ñ–ï–ù–ò–ï –ò –§–ò–ó–ò–ö–ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ playerX: X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –∏–≥—Ä–æ–∫–∞ (250)                                         ‚îÇ
        ‚îÇ gravity: –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è (0.6) - –±–æ–ª—å—à–µ = –±—ã—Å—Ç—Ä–µ–µ –ø–∞–¥–µ–Ω–∏–µ                     ‚îÇ
        ‚îÇ baseSpeed: –ë–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä—ã (6)                                       ‚îÇ
        ‚îÇ speedIncreaseRate: –°–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (0.0002)                 ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –°–ò–°–¢–ï–ú–ê –ü–†–´–ñ–ö–û–í ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ jumpForce.short: –°–∏–ª–∞ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –ø—Ä—ã–∂–∫–∞ (-12)                               ‚îÇ
        ‚îÇ jumpForce.long: –°–∏–ª–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–∞ (-18)                                ‚îÇ
        ‚îÇ maxJumpHoldTime: –ú–∞–∫—Å. –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä—ã–∂–∫–∞ (70–º—Å)                      ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ –ú–ï–•–ê–ù–ò–ö–ê –ü–†–´–ñ–ö–û–í:                                                          ‚îÇ
        ‚îÇ ‚Ä¢ –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (< 200–º—Å) = –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä—ã–∂–æ–∫                            ‚îÇ
        ‚îÇ ‚Ä¢ –î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (> 200–º—Å) = –≤—ã—Å–æ–∫–∏–π –ø—Ä—ã–∂–æ–∫                             ‚îÇ
        ‚îÇ ‚Ä¢ –£–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–æ maxJumpHoldTime = –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä—ã–∂–æ–∫                     ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –ì–ï–ù–ï–†–ê–¶–ò–Ø –ü–†–ï–ü–Ø–¢–°–¢–í–ò–ô ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ obstacleTypes: ['snowHeap', 'snowball', 'tree', 'hare', 'rock', 'log']     ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ difficulty:                                                                 ‚îÇ
        ‚îÇ ‚Ä¢ initialObstacleChance: –ù–∞—á–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (0.015)             ‚îÇ
        ‚îÇ ‚Ä¢ maxObstacleChance: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ (0.035)                          ‚îÇ
        ‚îÇ ‚Ä¢ initialMinDistance: –ù–∞—á. –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏ (400) ‚îÇ
        ‚îÇ ‚Ä¢ finalMinDistance: –ö–æ–Ω–µ—á–Ω–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (200)                  ‚îÇ
        ‚îÇ ‚Ä¢ difficultyIncreaseDistance: –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è (5000)      ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –°–ö–û–†–û–°–¢–ù–´–ï –ë–£–°–¢–´ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ speedBoostInterval: –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –±—É—Å—Ç–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ (300 –æ—á–∫–æ–≤)                 ‚îÇ
        ‚îÇ speedBoostMultiplier: –ú–Ω–æ–∂–∏—Ç–µ–ª—å —É—Å–∫–æ—Ä–µ–Ω–∏—è (1.3)                            ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ –ö–ê–ñ–î–´–ï 300 –û–ß–ö–û–í: —Å–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Ä–∞—Å—Ç—ë—Ç –≤ 1.3 —Ä–∞–∑–∞                    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –ë–£–§–ï–†–ù–ê–Ø –ó–û–ù–ê –î–õ–Ø –ö–û–õ–õ–ò–ó–ò–ô ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ collisionBuffer:                                                            ‚îÇ
        ‚îÇ ‚Ä¢ playerBuffer: –ë—É—Ñ–µ—Ä –∏–≥—Ä–æ–∫–∞ (8px) - "–Ω–µ–≤–∏–¥–∏–º–∞—è –∑–æ–Ω–∞" –≤–æ–∫—Ä—É–≥ —Å–Ω–µ–≥–æ—Ö–æ–¥–∞    ‚îÇ
        ‚îÇ ‚Ä¢ obstacleBuffer: –ë—É—Ñ–µ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (4px) - —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–ª–ª–∏–∑–∏–π     ‚îÇ
        ‚îÇ ‚Ä¢ enablePlayerBuffer: –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –∏–≥—Ä–æ–∫–∞ (true)                        ‚îÇ
        ‚îÇ ‚Ä¢ enableObstacleBuffer: –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (true)                 ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ customBuffers - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –±—É—Ñ–µ—Ä—ã –¥–ª—è —Ç–∏–ø–æ–≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π:              ‚îÇ
        ‚îÇ ‚Ä¢ snowHeap: 6px (—Å—É–≥—Ä–æ–±—ã)                                                  ‚îÇ
        ‚îÇ ‚Ä¢ snowball: 8px (—Å–Ω–µ–∂–∫–∏ - –∫—Ä—É–≥–ª—ã–µ, –±–æ–ª—å—à–µ –±—É—Ñ–µ—Ä)                         ‚îÇ
        ‚îÇ ‚Ä¢ tree: 4px (–¥–µ—Ä–µ–≤—å—è)                                                      ‚îÇ
        ‚îÇ ‚Ä¢ hare: 10px (–∑–∞–π—Ü—ã - –∂–∏–≤—ã–µ, –±–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä)                               ‚îÇ
        ‚îÇ ‚Ä¢ rock: 3px (–∫–∞–º–Ω–∏)                                                        ‚îÇ
        ‚îÇ ‚Ä¢ log: 5px (–±—Ä–µ–≤–Ω–∞)                                                        ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ –ù–ê–°–¢–†–û–ô–ö–ê –°–õ–û–ñ–ù–û–°–¢–ò:                                                       ‚îÇ
        ‚îÇ ‚Ä¢ –£–í–ï–õ–ò–ß–ò–¢–¨ –±—É—Ñ–µ—Ä—ã = –∏–≥—Ä–∞ –ª–µ–≥—á–µ (–±–æ–ª—å—à–µ "–ø—Ä–æ—â–µ–Ω–∏—è")                      ‚îÇ
        ‚îÇ ‚Ä¢ –£–ú–ï–ù–¨–®–ò–¢–¨ –±—É—Ñ–µ—Ä—ã = –∏–≥—Ä–∞ —Å–ª–æ–∂–Ω–µ–µ (—Ç–æ—á–Ω—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏)                      ‚îÇ
        ‚îÇ ‚Ä¢ 0px = —Ç–æ—á–Ω—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏ –±–µ–∑ "–ø—Ä–æ—â–µ–Ω–∏—è"                                    ‚îÇ
        ‚îÇ ‚Ä¢ 10-15px = –æ—á–µ–Ω—å –ª—ë–≥–∫–∞—è –∏–≥—Ä–∞                                            ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –í–ò–ó–£–ê–õ–¨–ù–´–ï –≠–§–§–ï–ö–¢–´ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ starCount: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥ (200)                                          ‚îÇ
        ‚îÇ mountainLayers: –°–ª–æ—ë–≤ –≥–æ—Ä (4)                                              ‚îÇ
        ‚îÇ mountainsPerLayer: –ì–æ—Ä –≤ –∫–∞–∂–¥–æ–º —Å–ª–æ–µ (6)                                   ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ snowmobileSprite: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–∞                               ‚îÇ
        ‚îÇ ‚Ä¢ columns, rows: –†–∞–∑–º–µ—Ä—ã —Å–ø—Ä–∞–π—Ç—à–∏—Ç–∞ (4x6)                                  ‚îÇ
        ‚îÇ ‚Ä¢ totalFrames: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤ (24)                                ‚îÇ
        ‚îÇ ‚Ä¢ frameDuration: –í—Ä–µ–º—è –∫–∞–¥—Ä–∞ –≤ –º—Å (40 = 25 FPS)                           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                            –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –°–û–í–ï–¢–´                             ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        üéÆ –î–õ–Ø –ù–ê–ß–ò–ù–ê–Æ–©–ò–• –ò–ì–†–û–ö–û–í:
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ playerBuffer –¥–æ 12-15
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ customBuffers –Ω–∞ 2-3 –¥–ª—è –≤—Å–µ—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π  
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ speedIncreaseRate –¥–æ 0.0001
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ initialObstacleChance –¥–æ 0.01
        
        üéØ –î–õ–Ø –û–ü–´–¢–ù–´–• –ò–ì–†–û–ö–û–í:
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ playerBuffer –¥–æ 4-6
        ‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ enablePlayerBuffer: false –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ speedIncreaseRate –¥–æ 0.0003
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ maxObstacleChance –¥–æ 0.04
        
        üì± –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í:
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ jumpForce.short –¥–æ -14, jumpForce.long –¥–æ -20
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ maxJumpHoldTime –¥–æ 50–º—Å –¥–ª—è –±–æ–ª–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ playerBuffer –¥–æ 10 (–ø–∞–ª—å—Ü—ã –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã)
        
        ‚ö° –î–õ–Ø –í–´–°–û–ö–û–ô –°–õ–û–ñ–ù–û–°–¢–ò:
        ‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –±—É—Ñ–µ—Ä—ã –≤ 0
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ speedIncreaseRate –¥–æ 0.0005
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ minDistance –¥–æ 150
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ obstacleChance –¥–æ 0.05
        
        üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò:
        ‚Ä¢ terrainSegmentLength: –î–ª–∏–Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ –∑–µ–º–ª–∏ (70px)
        ‚Ä¢ terrainHeightVariation: –í—ã variation –∑–µ–º–ª–∏ (80px) 
        ‚Ä¢ terrainBaseHeight: –ë–∞–∑–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞ –∑–µ–º–ª–∏ (0.75 = 75% –æ—Ç –≤—ã—Å–æ—Ç—ã —ç–∫—Ä–∞–Ω–∞)
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                              –¢–ò–ü–´ –ü–†–ï–ü–Ø–¢–°–¢–í–ò–ô                              ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        üèîÔ∏è  SNOWHEAP (–°—É–≥—Ä–æ–±): –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ, —Å—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
        ‚ö™ SNOWBALL (–°–Ω–µ–∂–æ–∫): –ö—Ä—É–≥–ª–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ, –∫–∞—Ç–∏—Ç—Å—è –∏ –≤—Ä–∞—â–∞–µ—Ç—Å—è  
        üå≤ TREE (–î–µ—Ä–µ–≤–æ): –í—ã—Å–æ–∫–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ —Å –∫—Ä–æ–Ω–æ–π –∏ —Å—Ç–≤–æ–ª–æ–º
        üê∞ HARE (–ó–∞—è—Ü): –ñ–∏–≤–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ, –ø—Ä—ã–≥–∞–µ—Ç –∏ –¥–≤–∏–≥–∞–µ—Ç—Å—è
        ü™® ROCK (–ö–∞–º–µ–Ω—å): –ù–µ–±–æ–ª—å—à–æ–µ –ø—Ä–æ—á–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ
        ü™µ LOG (–ë—Ä–µ–≤–Ω–æ): –î–ª–∏–Ω–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ –Ω–∞ –∑–µ–º–ª–µ
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                              –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨                             ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        –î–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç—å starCount –¥–æ 100
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç—å mountainLayers –¥–æ 2
        ‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å frameDuration –¥–æ 60 (16 FPS)
        ‚Ä¢ –û—Ç–∫–ª—é—á–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
        
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë  –£–¥–∞—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–∏—è—Ç–Ω–æ–π –∏–≥—Ä—ã! üöó‚ùÑÔ∏è                                  ‚ïë
        ‚ïë  –ò–∑–º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç                      ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        */

        // === –†–ê–°–ß–Å–¢ –¢–ï–ö–£–©–ï–ì–û –ú–ê–°–®–¢–ê–ë–ê ===
        function calculateCurrentScale() {
            if (!SCALING_CONFIG.autoScale) {
                return {
                    scale: 1.0,
                    width: SCALING_CONFIG.baseWidth,
                    height: SCALING_CONFIG.baseHeight
                };
            }
            
            const container = document.getElementById('gameContainer');
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            const heightScale = containerHeight / SCALING_CONFIG.baseHeight;
            
            let scale = Math.max(
                SCALING_CONFIG.minScale,
                Math.min(SCALING_CONFIG.maxScale, heightScale)
            );
            
            const width = SCALING_CONFIG.baseWidth * scale;
            const height = SCALING_CONFIG.baseHeight * scale;
            
            return { scale, width, height };
        }

        // –†–µ—Å—É—Ä—Å—ã –∏–≥—Ä—ã
        const assets = {
            snowmobileSprite: null, // –°–ø—Ä–∞–π—Ç—à–∏—Ç —Å–Ω–µ–≥–æ—Ö–æ–¥–∞
            snowmobileStatic: null, // –°—Ç–∞—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (fallback)
            snowHeapImg: null,
            snowballImg: null,
            treeImg: null,
            hareImg: null,
            rockImg: null,
            logImg: null,
            loaded: 0,
            total: 0
        };

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let game = {
            running: false,
            score: 0,
            speed: GAME_CONFIG.baseSpeed,
            gameTime: 0,
            highScore: localStorage.getItem('snowride_highscore') || 0,
            distanceSinceLastObstacle: 0,
            currentScale: 1.0,
            gameWidth: SCALING_CONFIG.baseWidth,
            gameHeight: SCALING_CONFIG.baseHeight,
            animationTime: 0,
            lastFrameTime: 0,
            
            // –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
            baseSpeedIncreaseRate: GAME_CONFIG.speedIncreaseRate,
            currentSpeedIncreaseRate: GAME_CONFIG.speedIncreaseRate,
            
            // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            currentDifficulty: {
                obstacleChance: GAME_CONFIG.difficulty.initialObstacleChance,
                minDistance: GAME_CONFIG.difficulty.initialMinDistance
            },
            
            // –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–∞
            spriteFrame: 0,
            spriteTimer: 0
        };

        // –ò–≥—Ä–æ–∫
        let player = {
            x: GAME_CONFIG.playerX,
            y: 0,
            baseWidth: 80,
            baseHeight: 40,
            get width() { return this.baseWidth * SCALING_CONFIG.playerScale * game.currentScale; },
            get height() { return this.baseHeight * SCALING_CONFIG.playerScale * game.currentScale; },
            vy: 0,
            isJumping: false,
            rotation: 0,
            
            // –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä—ã–∂–∫–æ–º
            isJumpHeld: false,
            jumpStartTime: 0,
            jumpHoldTime: 0,
            jumpType: 'short'
        };

        // –õ–∞–Ω–¥—à–∞—Ñ—Ç
        let terrain = [];
        let terrainPoints = [];

        // –ó–≤—ë–∑–¥—ã –¥–ª—è –Ω–µ–±–∞
        let stars = [];

        // –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        let obstacles = [];

        // –ß–∞—Å—Ç–∏—Ü—ã
        let particles = [];

        // –ü–∞—Ä–∞–ª–ª–∞–∫—Å-—Å–ª–æ–∏ (–≥–æ—Ä—ã) - –±–µ–∑ —Å–Ω–µ–∂–Ω—ã—Ö —à–∞–ø–æ–∫
        let mountains = [];

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function loadImage(src, name) {
            return new Promise((resolve, reject) => {
                assets.total++;
                const img = new Image();
                
                img.onload = () => {
                    assets[name] = img;
                    assets.loaded++;
                    console.log(`–ó–∞–≥—Ä—É–∂–µ–Ω: ${src}`);
                    resolve(img);
                };
                img.onerror = () => {
                    console.log(`–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${src} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`);
                    assets.loaded++;
                    resolve(null);
                };
                img.src = src;
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
        async function loadAssets() {
            loadingElement.style.display = 'block';
            
            try {
                // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø—Ä–∞–π—Ç—à–∏—Ç
                await Promise.all([
                    loadImage('snowride-sheet.png', 'snowmobileSprite').then((sprite) => {
                        if (!sprite) {
                            // –ï—Å–ª–∏ —Å–ø—Ä–∞–π—Ç—à–∏—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–±—É–µ–º —Å—Ç–∞—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                            return loadImage('snowride.png', 'snowmobileStatic');
                        }
                        return sprite;
                    }),
                    loadImage('snowheap.png', 'snowHeapImg'),
                    loadImage('snowball.png', 'snowballImg'),
                    loadImage('tree.png', 'treeImg'),
                    loadImage('hare.png', 'hareImg'),
                    loadImage('rock.png', 'rockImg'),
                    loadImage('log.png', 'logImg')
                ]);
            } catch (error) {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:', error);
            }
            
            loadingElement.style.display = 'none';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        async function init() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
            await loadAssets();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª—É—á—à–µ–≥–æ —Å—á–µ—Ç–∞
            bestScoreElement.textContent = game.highScore;
            highScoreElement.textContent = game.highScore;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤—ë–∑–¥
            initStars();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
            initTerrain();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–∞–∫—Å-–≥–æ—Ä
            initMountains();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
            player.y = game.gameHeight * 0.65 - player.height / 2;
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            setupEventListeners();
            
            // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–∞–Ω–≤–∞—Å–∞
            resizeCanvas();
            
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
            game.lastFrameTime = Date.now();
            requestAnimationFrame(gameLoop);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤—ë–∑–¥
        function initStars() {
            stars = [];
            for (let i = 0; i < GAME_CONFIG.starCount; i++) {
                stars.push({
                    x: Math.random() * game.gameWidth,
                    y: Math.random() * game.gameHeight * 0.5,
                    size: Math.random() * 2 + 0.5,
                    speed: Math.random() * 0.15 + 0.05,
                    brightness: Math.random() * 0.7 + 0.3,
                    twinkleSpeed: Math.random() * 0.05,
                    twinkleOffset: Math.random() * Math.PI * 2,
                    color: Math.random() > 0.9 ? '#b3e5fc' : '#ffffff'
                });
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞ (—Å—Ç–∞—Ä—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
        function initTerrain() {
            terrainPoints = [];
            
            for (let x = -GAME_CONFIG.terrainSegmentLength; x <= game.gameWidth + GAME_CONFIG.terrainSegmentLength * 20; x += GAME_CONFIG.terrainSegmentLength) {
                let baseY = game.gameHeight * GAME_CONFIG.terrainBaseHeight;
                let variation = Math.sin(x * 0.01) * GAME_CONFIG.terrainHeightVariation * 0.5;
                let randomY = (Math.random() - 0.5) * GAME_CONFIG.terrainHeightVariation * 0.2;
                let y = baseY + variation + randomY;
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É
                let minHeight = game.gameHeight * 0.35;
                let maxHeight = game.gameHeight * 0.8;
                y = Math.max(minHeight, Math.min(maxHeight, y));
                
                terrainPoints.push({x, y});
            }
            
            updateTerrain();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–æ—Ä (–±–µ–∑ —Å–Ω–µ–∂–Ω—ã—Ö —à–∞–ø–æ–∫)
        function initMountains() {
            mountains = [];
            
            // –¶–≤–µ—Ç–∞ –≥–æ—Ä —Å —Ä–∞–∑–Ω–æ–π –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å—é (–±–µ–∑ —Å–Ω–µ–∂–Ω—ã—Ö —à–∞–ø–æ–∫)
            const mountainColors = [
                'rgba(45, 90, 154, 0.9)',   // –ë–ª–∏–∂–Ω–∏–µ –≥–æ—Ä—ã - —Ç—ë–º–Ω—ã–µ –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ
                'rgba(58, 106, 179, 0.8)',  // 
                'rgba(74, 122, 197, 0.7)',  // 
                'rgba(90, 138, 213, 0.6)'   // –î–∞–ª—å–Ω–∏–µ –≥–æ—Ä—ã - —Å–≤–µ—Ç–ª—ã–µ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ
            ];
            
            for (let layer = 0; layer < GAME_CONFIG.mountainLayers; layer++) {
                let layerMountains = [];
                let count = GAME_CONFIG.mountainsPerLayer;
                let speedFactor = 0.03 + layer * 0.02;
                
                // –í—ã—Å–æ—Ç–∞ –≥–æ—Ä —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –¥–ª—è –¥–∞–ª—å–Ω–∏—Ö —Å–ª–æ—ë–≤
                let baseHeight = (200 - layer * 40) * game.currentScale;
                
                for (let i = 0; i < count; i++) {
                    let width = (game.gameWidth / count) * (1.5 + Math.random() * 0.5);
                    let x = (game.gameWidth / count) * i - width * 0.2 + Math.random() * 50;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—É—é –≤—ã—Å–æ—Ç—É –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
                    let height = baseHeight * (0.6 + Math.random() * 0.8);
                    
                    layerMountains.push({
                        x, 
                        width, 
                        height, 
                        speedFactor, 
                        color: mountainColors[layer],
                        baseWidth: width,
                        baseHeight: height
                    });
                }
                
                mountains.push(layerMountains);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –≥–æ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–∞—Å—à—Ç–∞–±–∞
        function updateMountainsScale() {
            for (let layer = 0; layer < mountains.length; layer++) {
                let layerMountains = mountains[layer];
                for (let mountain of layerMountains) {
                    mountain.width = mountain.baseWidth * (game.gameWidth / SCALING_CONFIG.baseWidth);
                    mountain.height = mountain.baseHeight * game.currentScale * (1.0 + Math.random() * 0.8);
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã
        function updateDifficulty() {
            let progress = Math.min(game.score / GAME_CONFIG.difficulty.difficultyIncreaseDistance, 1.0);
            
            game.currentDifficulty.obstacleChance = 
                GAME_CONFIG.difficulty.initialObstacleChance + 
                (GAME_CONFIG.difficulty.maxObstacleChance - GAME_CONFIG.difficulty.initialObstacleChance) * progress;
            
            game.currentDifficulty.minDistance = 
                GAME_CONFIG.difficulty.initialMinDistance - 
                (GAME_CONFIG.difficulty.initialMinDistance - GAME_CONFIG.difficulty.finalMinDistance) * progress;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å —É—á—ë—Ç–æ–º –±—É—Å—Ç–∞ –∫–∞–∂–¥—ã–µ 300 –æ—á–∫–æ–≤
        function updateSpeedWithBoost() {
            // –ö–∞–∂–¥—ã–µ 300 –æ—á–∫–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
            const boostLevel = Math.floor(game.score / GAME_CONFIG.speedBoostInterval);
            game.currentSpeedIncreaseRate = game.baseSpeedIncreaseRate * 
                Math.pow(GAME_CONFIG.speedBoostMultiplier, boostLevel);
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–µ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞
            game.speed = GAME_CONFIG.baseSpeed + game.gameTime * game.currentSpeedIncreaseRate;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–∞
        function updateSpriteAnimation(deltaTime) {
            if (!assets.snowmobileSprite) return;
            
            game.spriteTimer += deltaTime;
            if (game.spriteTimer >= GAME_CONFIG.snowmobileSprite.frameDuration) {
                game.spriteTimer = 0;
                game.spriteFrame = (game.spriteFrame + 1) % GAME_CONFIG.snowmobileSprite.totalFrames;
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
        function updateTerrain() {
            for (let i = 0; i < terrainPoints.length; i++) {
                terrainPoints[i].x -= game.speed;
            }
            
            while (terrainPoints.length > 0 && terrainPoints[0].x < -GAME_CONFIG.terrainSegmentLength * 2) {
                terrainPoints.shift();
            }
            
            let lastPoint = terrainPoints[terrainPoints.length - 1];
            while (lastPoint.x < game.gameWidth + GAME_CONFIG.terrainSegmentLength * 10) {
                let x = lastPoint.x + GAME_CONFIG.terrainSegmentLength;
                let baseY = game.gameHeight * GAME_CONFIG.terrainBaseHeight;
                let variation = Math.sin(x * 0.01) * GAME_CONFIG.terrainHeightVariation * 0.5;
                let randomY = (Math.random() - 0.5) * GAME_CONFIG.terrainHeightVariation * 0.2;
                let y = baseY + variation + randomY;
                
                let minHeight = game.gameHeight * 0.35;
                let maxHeight = game.gameHeight * 0.8;
                y = Math.max(minHeight, Math.min(maxHeight, y));
                
                terrainPoints.push({x, y});
                lastPoint = terrainPoints[terrainPoints.length - 1];
            }
            
            terrain = [];
            terrain.push({x: -100, y: game.gameHeight + 100});
            
            for (let point of terrainPoints) {
                terrain.push({x: point.x, y: point.y});
            }
            
            terrain.push({x: terrainPoints[terrainPoints.length - 1].x, y: game.gameHeight + 100});
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–≤—ë–∑–¥
        function updateStars() {
            game.animationTime += 0.01;
            
            for (let star of stars) {
                star.x -= star.speed;
                star.twinkleOffset += star.twinkleSpeed;
                
                if (star.x < -10) {
                    star.x = game.gameWidth + 10;
                    star.y = Math.random() * game.gameHeight * 0.5;
                }
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
        function generateObstacles() {
            game.distanceSinceLastObstacle += game.speed;
            
            updateDifficulty();
            
            if (game.distanceSinceLastObstacle > game.currentDifficulty.minDistance) {
                let chance = game.currentDifficulty.obstacleChance * 
                            (game.distanceSinceLastObstacle / game.currentDifficulty.minDistance);
                
                if (Math.random() < chance) {
                    let x = game.gameWidth + 100;
                    let groundY = getGroundHeightAt(x);
                    
                    let obstacleType = GAME_CONFIG.difficulty.obstacleTypes[
                        Math.floor(Math.random() * GAME_CONFIG.difficulty.obstacleTypes.length)
                    ];
                    
                    let obstacle = createObstacle(obstacleType, x, groundY);
                    
                    if (obstacle) {
                        obstacles.push(obstacle);
                        game.distanceSinceLastObstacle = 0;
                    }
                }
                
                if (game.distanceSinceLastObstacle > game.currentDifficulty.minDistance * 2) {
                    let x = game.gameWidth + 100;
                    let groundY = getGroundHeightAt(x);
                    let obstacleType = GAME_CONFIG.difficulty.obstacleTypes[
                        Math.floor(Math.random() * GAME_CONFIG.difficulty.obstacleTypes.length)
                    ];
                    let obstacle = createObstacle(obstacleType, x, groundY);
                    
                    if (obstacle) {
                        obstacles.push(obstacle);
                        game.distanceSinceLastObstacle = 0;
                    }
                }
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        function createObstacle(type, x, groundY) {
            let baseSize = 1.0 * SCALING_CONFIG.obstacleScale * game.currentScale;
            
            switch(type) {
                case 'snowHeap':
                    return {
                        type: 'snowHeap',
                        x: x,
                        y: groundY,
                        baseWidth: 60,
                        baseHeight: 40,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#ffffff',
                        hasImage: assets.snowHeapImg !== null
                    };
                case 'snowball':
                    return {
                        type: 'snowball',
                        x: x,
                        y: groundY - 30 * game.currentScale,
                        baseRadius: 30,
                        get radius() { return this.baseRadius * baseSize; },
                        color: '#f0f8ff',
                        hasImage: assets.snowballImg !== null,
                        rotation: Math.random() * Math.PI * 2
                    };
                case 'tree':
                    return {
                        type: 'tree',
                        x: x,
                        y: groundY,
                        baseWidth: 40,
                        baseHeight: 80,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        trunkColor: '#8B4513',
                        foliageColor: '#228B22',
                        hasImage: assets.treeImg !== null
                    };
                case 'hare':
                    return {
                        type: 'hare',
                        x: x,
                        y: groundY - 20 * game.currentScale,
                        baseWidth: 40,
                        baseHeight: 30,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#f5f5f5',
                        jumpOffset: Math.random() * Math.PI * 2,
                        jumpSpeed: 0.05 + Math.random() * 0.03,
                        hasImage: assets.hareImg !== null
                    };
                case 'rock':
                    return {
                        type: 'rock',
                        x: x,
                        y: groundY - 20 * game.currentScale,
                        baseWidth: 50,
                        baseHeight: 30,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#777777',
                        hasImage: assets.rockImg !== null
                    };
                case 'log':
                    return {
                        type: 'log',
                        x: x,
                        y: groundY - 15 * game.currentScale,
                        baseWidth: 80,
                        baseHeight: 20,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#8B4513',
                        hasImage: assets.logImg !== null
                    };
                default:
                    return null;
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã –∑–µ–º–ª–∏
        function getGroundHeightAt(x) {
            for (let i = 0; i < terrainPoints.length - 1; i++) {
                let p1 = terrainPoints[i];
                let p2 = terrainPoints[i + 1];
                
                if (x >= p1.x && x <= p2.x) {
                    let t = (x - p1.x) / (p2.x - p1.x);
                    return p1.y + (p2.y - p1.y) * t;
                }
            }
            
            return terrainPoints[terrainPoints.length - 1].y;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
        function updateObstacles() {
            generateObstacles();
            
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let obstacle = obstacles[i];
                obstacle.x -= game.speed;
                
                if (obstacle.type === 'hare') {
                    obstacle.jumpOffset += obstacle.jumpSpeed;
                    obstacle.y = getGroundHeightAt(obstacle.x) - 20 * game.currentScale + 
                                Math.sin(obstacle.jumpOffset) * 15 * game.currentScale;
                }
                
                if (obstacle.type === 'snowball') {
                    obstacle.rotation += 0.05;
                }
                
                if (obstacle.x < -100) {
                    obstacles.splice(i, 1);
                    continue;
                }
                
                if (checkCollision(player, obstacle)) {
                    gameOver();
                    return;
                }
            }
        }

        // === –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ö–û–õ–õ–ò–ó–ò–ô –° –ë–£–§–ï–†–ù–´–ú–ò –ó–û–ù–ê–ú–ò ===
        // –ë—É—Ñ–µ—Ä–Ω—ã–µ –∑–æ–Ω—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç "–º–≥–Ω–æ–≤–µ–Ω–Ω—É—é —Å–º–µ—Ä—Ç—å" –ø—Ä–∏ –º–∞–ª–µ–π—à–µ–º –∫–∞—Å–∞–Ω–∏–∏
        // –ò–≥—Ä–æ–∫ –∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –º–æ–≥—É—Ç "—á—É—Ç—å-—á—É—Ç—å" –Ω–∞–µ–∑–∂–∞—Ç—å –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ –±–µ–∑ –ø–æ—Ä–∞–∂–µ–Ω–∏—è
        
        /**
         * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–ª–∏–∑–∏—é –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–æ–º –∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º —Å —É—á—ë—Ç–æ–º –±—É—Ñ–µ—Ä–Ω—ã—Ö –∑–æ–Ω
         * @param {Object} player - –æ–±—ä–µ–∫—Ç –∏–≥—Ä–æ–∫–∞
         * @param {Object} obstacle - –æ–±—ä–µ–∫—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
         * @returns {boolean} true –µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–ª–ª–∏–∑–∏—è, false –∏–Ω–∞—á–µ
         */
        function checkCollision(player, obstacle) {
            // –ü–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É—Ñ–µ—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
            const bufferConfig = GAME_CONFIG.collisionBuffer;
            
            // –í—ã—á–∏—Å–ª—è–µ–º –±—É—Ñ–µ—Ä—ã —Å —É—á—ë—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∞ –∏–≥—Ä—ã
            const scaleAdjustedPlayerBuffer = bufferConfig.enablePlayerBuffer ? 
                bufferConfig.playerBuffer * game.currentScale : 0;
            
            // –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä –¥–ª—è —Ç–∏–ø–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            const obstacleSpecificBuffer = bufferConfig.customBuffers[obstacle.type] || 0;
            const scaleAdjustedObstacleBuffer = bufferConfig.enableObstacleBuffer ? 
                (obstacleSpecificBuffer + bufferConfig.obstacleBuffer) * game.currentScale : 0;
            
            // –ì—Ä–∞–Ω–∏—Ü—ã –∏–≥—Ä–æ–∫–∞ —Å –±—É—Ñ–µ—Ä–æ–º
            let playerLeft = player.x - player.width / 2 - scaleAdjustedPlayerBuffer;
            let playerRight = player.x + player.width / 2 + scaleAdjustedPlayerBuffer;
            let playerTop = player.y - player.height / 2 - scaleAdjustedPlayerBuffer;
            let playerBottom = player.y + player.height / 2 + scaleAdjustedPlayerBuffer;
            
            switch(obstacle.type) {
                case 'snowHeap':
                case 'rock':
                case 'log':
                    // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è —Å –±—É—Ñ–µ—Ä–æ–º
                    let left = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let right = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let top = obstacle.y - obstacle.height / 2 + scaleAdjustedObstacleBuffer;
                    let bottom = obstacle.y + obstacle.height / 2 - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < left || 
                            playerLeft > right || 
                            playerBottom < top || 
                            playerTop > bottom);
                
                case 'snowball':
                    // –ö—Ä—É–≥–ª—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è (—Å–Ω–µ–∂–∫–∏) - –±—É—Ñ–µ—Ä –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Ä–∞–¥–∏—É—Å—É
                    let dx = player.x - obstacle.x;
                    let dy = player.y - obstacle.y;
                    let distance = Math.sqrt(dx * dx + dy * dy);
                    let effectivePlayerRadius = player.width / 2 + scaleAdjustedPlayerBuffer;
                    let effectiveObstacleRadius = obstacle.radius + scaleAdjustedObstacleBuffer;
                    
                    return distance < (effectivePlayerRadius + effectiveObstacleRadius);
                
                case 'tree':
                    // –î–µ—Ä–µ–≤—å—è - –æ—Å–æ–±–∞—è —Ñ–æ—Ä–º–∞ —Å —Å—Ç–≤–æ–ª–æ–º –∏ –∫—Ä–æ–Ω–æ–π
                    let treeLeft = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let treeRight = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let treeTop = obstacle.y - obstacle.height + scaleAdjustedObstacleBuffer;
                    let treeBottom = obstacle.y - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < treeLeft || 
                            playerLeft > treeRight || 
                            playerBottom < treeTop || 
                            playerTop > treeBottom);
                
                case 'hare':
                    // –ó–∞–π—Ü—ã - –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–µ, –Ω–æ –∂–∏–≤—ã–µ (–±–æ–ª—å—à–∏–π –±—É—Ñ–µ—Ä)
                    let hareLeft = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let hareRight = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let hareTop = obstacle.y - obstacle.height / 2 + scaleAdjustedObstacleBuffer;
                    let hareBottom = obstacle.y + obstacle.height / 2 - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < hareLeft || 
                            playerLeft > hareRight || 
                            playerBottom < hareTop || 
                            playerTop > hareBottom);
                    
                default:
                    // –î–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏—é
                    let defaultLeft = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let defaultRight = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let defaultTop = obstacle.y - obstacle.height / 2 + scaleAdjustedObstacleBuffer;
                    let defaultBottom = obstacle.y + obstacle.height / 2 - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < defaultLeft || 
                            playerLeft > defaultRight || 
                            playerBottom < defaultTop || 
                            playerTop > defaultBottom);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ —Å –Ω–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–æ–π –ø—Ä—ã–∂–∫–æ–≤
        function updatePlayer(deltaTime) {
            const currentTime = Date.now();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä—ã–∂–∫–∞
            if (player.isJumpHeld && player.isJumping) {
                player.jumpHoldTime = currentTime - player.jumpStartTime;
                
                // –ï—Å–ª–∏ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–µ–≤—ã—Å–∏–ª–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ, –æ—Ç–ø—É—Å–∫–∞–µ–º –ø—Ä—ã–∂–æ–∫
                if (player.jumpHoldTime > GAME_CONFIG.maxJumpHoldTime) {
                    player.isJumpHeld = false;
                    player.jumpType = 'long'; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä—ã–∂–æ–∫
                } else {
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø—Ä—ã–∂–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è
                    if (player.jumpHoldTime > 200) {
                        player.jumpType = 'long';
                    } else {
                        player.jumpType = 'short';
                    }
                }
                
                // –ü—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ –ø—Ä—ã–∂–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–≤–µ—Ä—Ö
                // –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –ø—Ä—ã–∂–∫–∞
                if (player.jumpType === 'long') {
                    player.vy = GAME_CONFIG.jumpForce.long;
                } else {
                    player.vy = GAME_CONFIG.jumpForce.short;
                }
            } else {
                // –ï—Å–ª–∏ –ø—Ä—ã–∂–æ–∫ –Ω–µ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –ø—Ä–∏–º–µ–Ω—è–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é
                player.vy += GAME_CONFIG.gravity;
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
            player.y += player.vy;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–µ–º–ª–∏
            let groundY = getGroundHeightAt(player.x);
            
            if (player.y > groundY - player.height / 2) {
                player.y = groundY - player.height / 2;
                player.vy = 0;
                player.isJumping = false;
                player.isJumpHeld = false;
                
                if (Math.abs(player.vy) > 5) {
                    createLandingParticles(player.x, player.y + player.height / 2);
                }
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è
            if (player.isJumping) {
                player.rotation = Math.max(-0.3, player.vy * 0.02);
            } else {
                player.rotation = Math.min(0.3, (player.y - (groundY - player.height / 2)) * 0.05);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –ø—Ä–∏ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–∏
        function createLandingParticles(x, y) {
            let particleCount = player.jumpType === 'long' ? 20 : 10;
            
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: x + (Math.random() - 0.5) * 40 * game.currentScale,
                    y: y,
                    vx: (Math.random() - 0.5) * 10 * game.currentScale,
                    vy: -Math.random() * (player.jumpType === 'long' ? 15 : 8) * game.currentScale,
                    baseRadius: Math.random() * 5 + 2,
                    get radius() { return this.baseRadius * SCALING_CONFIG.particleScale * game.currentScale; },
                    color: '#ffffff',
                    life: 40
                });
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
        function updateParticles(deltaTime) {
            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.2 * game.currentScale;
                p.life--;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
        }

        // –ù–∞—á–∞–ª–æ –ø—Ä—ã–∂–∫–∞ (–Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏)
        function startJump() {
            if (!player.isJumping && game.running) {
                player.isJumping = true;
                player.isJumpHeld = true;
                player.jumpStartTime = Date.now();
                player.jumpHoldTime = 0;
                player.jumpType = 'short';
                
                // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä—ã–∂–æ–∫ —Å –∫–æ—Ä–æ—Ç–∫–æ–π —Å–∏–ª–æ–π
                player.vy = GAME_CONFIG.jumpForce.short;
                
                // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –ø—Ä—ã–∂–∫–∞
                createLandingParticles(player.x, player.y + player.height / 2);
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä—ã–∂–∫–∞ (–æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏)
        function endJump() {
            if (player.isJumpHeld && game.running) {
                player.isJumpHeld = false;
                
                // –ï—Å–ª–∏ –ø—Ä—ã–∂–æ–∫ –±—ã–ª –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–º, –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä—ã–∂–æ–∫
                if (player.jumpHoldTime < 50) {
                    player.jumpType = 'short';
                    player.vy = GAME_CONFIG.jumpForce.short;
                }
            }
        }

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            const currentTime = Date.now();
            const deltaTime = currentTime - game.lastFrameTime;
            game.lastFrameTime = currentTime;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (game.running) {
                game.gameTime++;
                game.score += game.speed * 0.1;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —Å —É—á—ë—Ç–æ–º –±—É—Å—Ç–∞
                updateSpeedWithBoost();
                
                game.animationTime += deltaTime * 0.001;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–ø—Ä–∞–π—Ç–∞
                updateSpriteAnimation(deltaTime);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
                updateStars();
                updateTerrain();
                updatePlayer(deltaTime);
                updateObstacles();
                updateParticles(deltaTime);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º HUD
                scoreElement.textContent = `–°—á—ë—Ç: ${Math.floor(game.score)}`;
                speedElement.textContent = `–°–∫–æ—Ä–æ—Å—Ç—å: ${game.speed.toFixed(1)}x`;
            }
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
            drawStars();
            drawMountains();
            drawTerrain();
            drawObstacles();
            drawPlayer();
            drawParticles();
            
            requestAnimationFrame(gameLoop);
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∑–≤—ë–∑–¥
        function drawStars() {
            for (let star of stars) {
                let brightness = star.brightness + Math.sin(star.twinkleOffset + game.animationTime) * 0.3;
                brightness = Math.max(0.2, Math.min(1, brightness));
                
                ctx.fillStyle = star.color.replace(')', `, ${brightness})`).replace('rgb', 'rgba');
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
                
                if (star.size > 1.5) {
                    ctx.fillStyle = star.color.replace(')', `, ${brightness * 0.2})`).replace('rgb', 'rgba');
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.size * 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥–æ—Ä (–±–µ–∑ —Å–Ω–µ–∂–Ω—ã—Ö —à–∞–ø–æ–∫)
        function drawMountains() {
            for (let layer = 0; layer < mountains.length; layer++) {
                let layerMountains = mountains[layer];
                let speedFactor = layerMountains[0].speedFactor;
                
                for (let mountain of layerMountains) {
                    mountain.x -= game.speed * speedFactor;
                    
                    if (mountain.x + mountain.width < 0) {
                        mountain.x = game.gameWidth + mountain.width * 0.5;
                        mountain.height = mountain.baseHeight * game.currentScale * (0.6 + Math.random() * 0.8);
                    }
                    
                    // –†–∏—Å—É–µ–º –≥–æ—Ä—É
                    ctx.fillStyle = mountain.color;
                    ctx.beginPath();
                    ctx.moveTo(mountain.x, game.gameHeight);
                    ctx.lineTo(mountain.x + mountain.width / 2, game.gameHeight - mountain.height);
                    ctx.lineTo(mountain.x + mountain.width, game.gameHeight);
                    ctx.closePath();
                    ctx.fill();
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
        function drawTerrain() {
            // –û—Å–Ω–æ–≤–Ω–æ–π —Å–Ω–µ–≥
            ctx.fillStyle = '#ffffff';
            ctx.beginPath();
            ctx.moveTo(terrain[0].x, terrain[0].y);
            
            for (let i = 1; i < terrain.length; i++) {
                ctx.lineTo(terrain[i].x, terrain[i].y);
            }
            
            ctx.closePath();
            ctx.fill();
            
            // –¢–µ–Ω–∏ –∏ —Ç–µ–∫—Å—Ç—É—Ä–∞ —Å–Ω–µ–≥–∞
            ctx.fillStyle = 'rgba(200, 220, 255, 0.1)';
            for (let i = 0; i < terrainPoints.length - 1; i += 3) {
                let p = terrainPoints[i];
                if (p.x > -50 && p.x < game.gameWidth + 50) {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 8 * game.currentScale, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
        function drawObstacles() {
            for (let obstacle of obstacles) {
                let img = null;
                
                switch(obstacle.type) {
                    case 'snowHeap': img = assets.snowHeapImg; break;
                    case 'snowball': img = assets.snowballImg; break;
                    case 'tree': img = assets.treeImg; break;
                    case 'hare': img = assets.hareImg; break;
                    case 'rock': img = assets.rockImg; break;
                    case 'log': img = assets.logImg; break;
                }
                
                if (img && obstacle.hasImage) {
                    let drawWidth = obstacle.width;
                    let drawHeight = obstacle.height;
                    
                    ctx.save();
                    
                    if (obstacle.type === 'hare') {
                        ctx.drawImage(img, obstacle.x - drawWidth/2, obstacle.y - drawHeight/2, drawWidth, drawHeight);
                    } else if (obstacle.type === 'snowball') {
                        ctx.save();
                        ctx.translate(obstacle.x, obstacle.y);
                        ctx.rotate(obstacle.rotation);
                        ctx.drawImage(img, -obstacle.radius, -obstacle.radius, 
                                    obstacle.radius * 2, obstacle.radius * 2);
                        ctx.restore();
                    } else if (obstacle.type === 'tree') {
                        ctx.drawImage(img, obstacle.x - drawWidth/2, obstacle.y - drawHeight, drawWidth, drawHeight);
                    } else {
                        ctx.drawImage(img, obstacle.x - drawWidth/2, obstacle.y - drawHeight/2, drawWidth, drawHeight);
                    }
                    
                    ctx.restore();
                } else {
                    drawObstaclePrimitive(obstacle);
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏
        function drawObstaclePrimitive(obstacle) {
            switch(obstacle.type) {
                case 'snowHeap':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x, obstacle.y - obstacle.height/2, 
                               obstacle.width/2, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'snowball':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.arc(obstacle.x, obstacle.y, obstacle.radius, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    ctx.beginPath();
                    ctx.arc(obstacle.x - obstacle.radius*0.3, obstacle.y - obstacle.radius*0.3, 
                           obstacle.radius*0.15, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'tree':
                    ctx.fillStyle = obstacle.trunkColor;
                    ctx.fillRect(obstacle.x - obstacle.width/4, obstacle.y - obstacle.height/4, 
                               obstacle.width/2, obstacle.height/4);
                    
                    ctx.fillStyle = obstacle.foliageColor;
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x - obstacle.width/2, obstacle.y - obstacle.height/4);
                    ctx.lineTo(obstacle.x + obstacle.width/2, obstacle.y - obstacle.height/4);
                    ctx.lineTo(obstacle.x, obstacle.y - obstacle.height);
                    ctx.closePath();
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x - obstacle.width/2.5, obstacle.y - obstacle.height/2);
                    ctx.lineTo(obstacle.x + obstacle.width/2.5, obstacle.y - obstacle.height/2);
                    ctx.lineTo(obstacle.x, obstacle.y - obstacle.height*0.8);
                    ctx.closePath();
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x - obstacle.width/3.5, obstacle.y - obstacle.height*0.75);
                    ctx.lineTo(obstacle.x + obstacle.width/3.5, obstacle.y - obstacle.height*0.75);
                    ctx.lineTo(obstacle.x, obstacle.y - obstacle.height*0.95);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'hare':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x, obstacle.y, obstacle.width/2, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x + obstacle.width/3, obstacle.y - obstacle.height/3, 
                               obstacle.width/4, obstacle.height/3, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x + obstacle.width/2.5, obstacle.y - obstacle.height/1.5, 
                               obstacle.width/8, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x + obstacle.width/1.8, obstacle.y - obstacle.height/1.5, 
                               obstacle.width/8, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#000000';
                    ctx.beginPath();
                    ctx.arc(obstacle.x + obstacle.width/2.2, obstacle.y - obstacle.height/3, 
                           obstacle.width/12, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'rock':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x, obstacle.y, obstacle.width/2, obstacle.height/2, 
                               Math.PI/4, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'log':
                    ctx.fillStyle = obstacle.color;
                    ctx.fillRect(obstacle.x - obstacle.width/2, obstacle.y - obstacle.height/2, 
                               obstacle.width, obstacle.height);
                    
                    ctx.fillStyle = '#5D4037';
                    for (let i = -obstacle.width/2 + 10; i < obstacle.width/2; i += 15 * game.currentScale) {
                        ctx.fillRect(obstacle.x + i, obstacle.y - obstacle.height/2, 
                                    5 * game.currentScale, obstacle.height);
                    }
                    break;
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞ —Å–æ —Å–ø—Ä–∞–π—Ç–æ–º
        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x, player.y);
            ctx.rotate(player.rotation);
            
            if (assets.snowmobileSprite) {
                // –†–∏—Å—É–µ–º —Å–ø—Ä–∞–π—Ç –∏–∑ —Å–ø—Ä–∞–π—Ç—à–∏—Ç–∞
                const sprite = assets.snowmobileSprite;
                const frameWidth = sprite.width / GAME_CONFIG.snowmobileSprite.columns;
                const frameHeight = sprite.height / GAME_CONFIG.snowmobileSprite.rows;
                
                // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –∫–∞–¥—Ä–∞
                const col = game.spriteFrame % GAME_CONFIG.snowmobileSprite.columns;
                const row = Math.floor(game.spriteFrame / GAME_CONFIG.snowmobileSprite.columns);
                const frameX = col * frameWidth;
                const frameY = row * frameHeight;
                
                // –†–∏—Å—É–µ–º —Ç–µ–∫—É—â–∏–π –∫–∞–¥—Ä
                ctx.drawImage(
                    sprite,
                    frameX, frameY, frameWidth, frameHeight,
                    -player.width/2, -player.height/2, player.width, player.height
                );
            } else if (assets.snowmobileStatic) {
                // –†–∏—Å—É–µ–º —Å—Ç–∞—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                ctx.drawImage(assets.snowmobileStatic, -player.width/2, -player.height/2, player.width, player.height);
            } else {
                // –†–∏—Å—É–µ–º —Å–Ω–µ–≥–æ—Ö–æ–¥ –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏
                ctx.fillStyle = '#e53935';
                ctx.fillRect(-player.width/2, -player.height/2, player.width, player.height);
                
                ctx.fillStyle = '#1e88e5';
                ctx.fillRect(-player.width/4, -player.height/2 - 10 * game.currentScale, 
                           player.width/2, 15 * game.currentScale);
                
                ctx.fillStyle = '#4fc3f7';
                ctx.fillRect(-player.width/2 - 10 * game.currentScale, -player.height/4, 
                           15 * game.currentScale, 5 * game.currentScale);
                ctx.fillRect(player.width/2 - 5 * game.currentScale, -player.height/4, 
                           15 * game.currentScale, 5 * game.currentScale);
                
                ctx.fillStyle = '#333333';
                ctx.fillRect(-player.width/2, player.height/2 - 10 * game.currentScale, 
                           player.width, 8 * game.currentScale);
                
                ctx.fillStyle = '#666666';
                for (let i = -player.width/2 + 5; i < player.width/2; i += 10 * game.currentScale) {
                    ctx.fillRect(i, player.height/2 - 10 * game.currentScale, 
                               5 * game.currentScale, 8 * game.currentScale);
                }
                
                ctx.fillStyle = '#ffeb3b';
                ctx.beginPath();
                ctx.arc(-player.width/2 + 5 * game.currentScale, -player.height/4, 
                       5 * game.currentScale, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.restore();
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —á–∞—Å—Ç–∏—Ü
        function drawParticles() {
            for (let p of particles) {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 40;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fill();
            }
            ctx.globalAlpha = 1;
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
            document.addEventListener('keydown', (e) => {
                if ((e.code === 'Space' || e.code === 'ArrowUp') && game.running && !player.isJumpHeld) {
                    startJump();
                    e.preventDefault();
                }
            });
            
            document.addEventListener('keyup', (e) => {
                if ((e.code === 'Space' || e.code === 'ArrowUp') && game.running && player.isJumpHeld) {
                    endJump();
                    e.preventDefault();
                }
            });
            
            // –ú—ã—à—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø—Ä—ã–∂–∫–∞
            jumpButton.addEventListener('mousedown', startJump);
            jumpButton.addEventListener('mouseup', endJump);
            jumpButton.addEventListener('mouseleave', () => {
                if (player.isJumpHeld) {
                    endJump();
                }
            });
            
            jumpButton.addEventListener('touchstart', (e) => {
                startJump();
                e.preventDefault();
            });
            
            jumpButton.addEventListener('touchend', (e) => {
                endJump();
                e.preventDefault();
            });
            
            // –ú—ã—à—å –¥–ª—è –∫–∞–Ω–≤–∞—Å–∞
            canvas.addEventListener('mousedown', startJump);
            canvas.addEventListener('mouseup', endJump);
            canvas.addEventListener('mouseleave', () => {
                if (player.isJumpHeld) {
                    endJump();
                }
            });
            
            canvas.addEventListener('touchstart', (e) => {
                startJump();
                e.preventDefault();
            });
            
            canvas.addEventListener('touchend', (e) => {
                endJump();
                e.preventDefault();
            });
            
            // –ö–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            startButton.addEventListener('click', startGame);
            restartButton.addEventListener('click', restartGame);
            
            window.addEventListener('resize', resizeCanvas);
        }

        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–Ω–≤–∞—Å–∞
        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            
            const scaleInfo = calculateCurrentScale();
            game.currentScale = scaleInfo.scale;
            game.gameWidth = scaleInfo.width;
            game.gameHeight = scaleInfo.height;
            
            canvas.width = game.gameWidth;
            canvas.height = game.gameHeight;
            
            canvas.style.width = `${game.gameWidth}px`;
            canvas.style.height = `${game.gameHeight}px`;
            
            updateMountainsScale();
            
            if (player.y === 0) {
                player.y = game.gameHeight * 0.65 - player.height / 2;
            }
            
            if (window.innerHeight > window.innerWidth) {
                jumpButton.style.bottom = '10vh';
                jumpButton.style.width = '80px';
                jumpButton.style.height = '80px';
                jumpButton.style.fontSize = '16px';
            } else {
                jumpButton.style.bottom = '30px';
                jumpButton.style.right = '30px';
                jumpButton.style.width = '120px';
                jumpButton.style.height = '120px';
                jumpButton.style.fontSize = '22px';
            }
        }

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            game.running = true;
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            game.score = 0;
            game.speed = GAME_CONFIG.baseSpeed;
            game.gameTime = 0;
            game.distanceSinceLastObstacle = 0;
            game.animationTime = 0;
            game.currentSpeedIncreaseRate = GAME_CONFIG.speedIncreaseRate;
            game.spriteFrame = 0;
            game.spriteTimer = 0;
            
            game.currentDifficulty.obstacleChance = GAME_CONFIG.difficulty.initialObstacleChance;
            game.currentDifficulty.minDistance = GAME_CONFIG.difficulty.initialMinDistance;
            
            player.y = game.gameHeight * 0.65 - player.height / 2;
            player.vy = 0;
            player.isJumping = false;
            player.isJumpHeld = false;
            player.rotation = 0;
            player.jumpType = 'short';
            
            obstacles = [];
            particles = [];
            
            initTerrain();
            updateMountainsScale();
        }

        // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
        function gameOver() {
            game.running = false;
            
            let currentScore = Math.floor(game.score);
            if (currentScore > game.highScore) {
                game.highScore = currentScore;
                localStorage.setItem('snowride_highscore', game.highScore);
                highScoreElement.textContent = game.highScore;
                bestScoreElement.textContent = game.highScore;
            }
            
            finalScoreElement.textContent = currentScore;
            gameOverScreen.style.display = 'flex';
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            startGame();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = init;
    </script>
</body>
</html>