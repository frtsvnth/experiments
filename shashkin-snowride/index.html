<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shashkin SnowRide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        
        body, html {
            overflow: hidden;
            width: 100%;
            height: 100%;
            background: #0a0a2a;
            font-family: 'Arial', sans-serif;
            color: white;
            /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∑—É–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
            touch-action: manipulation;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameCanvas {
            display: block;
            background: #0a0a2a;
            border-radius: 4px;
        }
        
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }
        
        #score {
            color: #4fc3f7;
        }
        
        #speed {
            color: #69f0ae;
            font-size: 18px;
            margin-top: 5px;
        }
        
        #jumpButton {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: rgba(79, 195, 247, 0.7);
            border: 4px solid white;
            color: white;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            transition: all 0.1s;
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.5);
            opacity: 0.9;
            touch-action: manipulation;
        }
        
        #jumpButton:active {
            transform: scale(0.95);
            background: rgba(79, 195, 247, 1);
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10, 10, 42, 0.95);
            z-index: 20;
        }
        
        #startScreen {
            text-align: center;
            padding: 20px;
        }
        
        #gameOverScreen {
            display: none;
        }
        
        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.7);
        }
        
        h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #ff5252;
        }
        
        .screen p {
            font-size: 20px;
            margin-bottom: 30px;
            max-width: 80%;
            line-height: 1.5;
        }
        
        .button {
            padding: 15px 40px;
            font-size: 22px;
            font-weight: bold;
            background: linear-gradient(to bottom, #4fc3f7, #0288d1);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .button:active {
            transform: translateY(1px);
        }
        
        .controls {
            margin-top: 30px;
            font-size: 18px;
            color: #bbbbbb;
        }
        
        #highScore {
            color: #ffeb3b;
            font-size: 28px;
            margin-top: 10px;
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 36px; }
            h2 { font-size: 28px; }
            #hud { font-size: 20px; }
            #jumpButton {
                width: 100px;
                height: 100px;
                font-size: 18px;
            }
        }
        
        @media (max-height: 600px) {
            #jumpButton {
                bottom: 15px;
                right: 15px;
                width: 80px;
                height: 80px;
                font-size: 16px;
            }
        }
        
        /* –ü–æ—Ä—Ç—Ä–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º */
        @media (orientation: portrait) {
            #jumpButton {
                bottom: 10vh;
                width: 80px;
                height: 80px;
                font-size: 16px;
            }
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #4fc3f7;
            z-index: 30;
            display: none;
        }

        /* === –°–¢–ò–õ–ò –ö–ù–û–ü–ö–ò –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê –í–ï–ë–ê-–°–¢–†–ê–ù–ò–¶–´ === */
        /* –ö–ù–û–ü–ö–ê –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê - –ê–ö–ö–£–†–ê–¢–ù–ê–Ø –ö–ù–û–ü–ö–ê –í –õ–ï–í–û–ú –í–ï–†–•–ù–ï–ú –£–ì–õ–£ */
        .fullscreen-page-btn {
            /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª, –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
            position: fixed;          /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–∫–Ω–∞ */
            top: 15px;               /* 15px –æ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è */
            left: 15px;              /* 15px –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è */
            z-index: 9999;           /* –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π z-index, —á—Ç–æ–±—ã –±—ã—Ç—å –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
            
            /* –†–∞–∑–º–µ—Ä—ã –∏ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ */
            width: 44px;             /* –®–∏—Ä–∏–Ω–∞ –∫–Ω–æ–ø–∫–∏ */
            height: 44px;            /* –í—ã—Å–æ—Ç–∞ –∫–Ω–æ–ø–∫–∏ */
            background: rgba(0, 0, 0, 0.5); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —á—ë—Ä–Ω—ã–π —Ñ–æ–Ω */
            border: 2px solid rgba(255, 255, 255, 0.4); /* –°–≤–µ—Ç–ª–∞—è —Ä–∞–º–∫–∞ */
            border-radius: 8px;      /* –°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —É–≥–ª—ã */
            
            /* –¶–≤–µ—Ç–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã */
            color: white;            /* –¶–≤–µ—Ç –∏–∫–æ–Ω–∫–∏ */
            cursor: pointer;         /* –ö—É—Ä—Å–æ—Ä-—Ä—É–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            transition: all 0.3s ease; /* –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ */
            backdrop-filter: blur(8px); /* –≠—Ñ—Ñ–µ–∫—Ç —Ä–∞–∑–º—ã—Ç–∏—è —Ñ–æ–Ω–∞ */
            
            /* –ö–æ–º–ø–æ–Ω–æ–≤–∫–∞ */
            display: flex;          /* Flexbox –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∫–æ–Ω–∫–∏ */
            align-items: center;     /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
            padding: 0;              /* –£–±–∏—Ä–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            margin: 0;               /* –£–±–∏—Ä–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            
            /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–∫–∏ */
            outline: none;          /* –£–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç—É—Ä –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
            user-select: none;       /* –ó–∞–ø—Ä–µ—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
            -webkit-tap-highlight-color: transparent; /* –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –º—ã—à–∏ */
        .fullscreen-page-btn:hover {
            background: rgba(0, 0, 0, 0.9); /* –ë–æ–ª–µ–µ —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω */
            border-color: rgba(255, 255, 255, 0.7); /* –ë–æ–ª–µ–µ —è—Ä–∫–∞—è —Ä–∞–º–∫–∞ */
            transform: scale(1.05); /* –õ—ë–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* –¢–µ–Ω—å */
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ */
        .fullscreen-page-btn:active {
            transform: scale(0.95); /* –õ—ë–≥–∫–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ */
        }

        /* –°—Ç–∏–ª—å –∏–∫–æ–Ω–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ */
        .fullscreen-page-btn .fullscreen-icon {
            width: 22px;            /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
            height: 22px;
            transition: opacity 0.3s ease; /* –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ */
        }

        /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —á–∞—Å—Ç–∏ –∏–∫–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è */
        .fullscreen-page-btn .fullscreen-normal {
            opacity: 1;             /* –í –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –≤–∏–¥–Ω—ã –≤—Å–µ —É–≥–ª—ã */
        }

        .fullscreen-page-btn .fullscreen-active {
            opacity: 0;              /* –í –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å–∫—Ä—ã—Ç—ã —É–±—Ä–∞–Ω–Ω—ã–µ —É–≥–ª—ã */
        }

        /* –í –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ –º–µ–Ω—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å —á–∞—Å—Ç–µ–π –∏–∫–æ–Ω–∫–∏ */
        .fullscreen-page-btn.fullscreen-active .fullscreen-normal {
            opacity: 0;              /* –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —É–≥–ª—ã */
        }

        .fullscreen-page-btn.fullscreen-active .fullscreen-active {
            opacity: 1;              /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–±—Ä–∞–Ω–Ω—ã–µ —É–≥–ª—ã */
        }

        /* –¶–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ */
        .fullscreen-page-btn.fullscreen-active {
            background: rgba(76, 175, 79, 0.495); /* –ó–µ–ª—ë–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
            border-color: rgba(255, 255, 255, 0.9); /* –Ø—Ä–∫–∞—è —Ä–∞–º–∫–∞ */
        }

        .fullscreen-page-btn.fullscreen-active:hover {
            background: rgba(76, 175, 80, 0.95); /* –ï—â—ë –±–æ–ª–µ–µ —è—Ä–∫–∏–π –∑–µ–ª—ë–Ω—ã–π –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 768px) {
            .fullscreen-page-btn {
                width: 48px;        /* –ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
                height: 48px;
                top: 12px;          /* –ß—É—Ç—å –±–ª–∏–∂–µ –∫ –∫—Ä–∞—é */
                left: 12px;
            }
            
            .fullscreen-page-btn .fullscreen-icon {
                width: 24px;        /* –ë–æ–ª—å—à–µ –∏–∫–æ–Ω–∫–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
                height: 24px;
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 480px) {
            .fullscreen-page-btn {
                width: 50px;
                height: 50px;
                top: 10px;
                left: 10px;
            }
            
            .fullscreen-page-btn .fullscreen-icon {
                width: 26px;
                height: 26px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- –ö–ù–û–ü–ö–ê –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê –í–ï–ë–ê-–°–¢–†–ê–ù–ò–¶–´ -->
        <!-- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É, –≤—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
        <!--<button id="fullscreenPageBtn" class="fullscreen-page-btn" title="–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã">-->
            <!-- SVG –∏–∫–æ–Ω–∫–∞ —Å –¥–≤—É–º—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏: –æ–±—ã—á–Ω—ã–π/–ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π -->
           <!--  <svg class="fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">-->
                <!-- –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º: –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã –ø–æ –≤—Å–µ–º 4 —É–≥–ª–∞–º -->
          <!--      <path class="fullscreen-normal" d="M3 3H7V7H3V3Z M17 3H21V7H17V3Z M3 17H7V21H3V17Z M17 17H21V21H17V17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> -->
                <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º: –ø–æ–∫–∞–∑–∞—Ç—å L-–æ–±—Ä–∞–∑–Ω—ã–µ —É–≥–ª—ã (—É–±—Ä–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω—ã) -->
         <!--       <path class="fullscreen-active" d="M3 3H7V7H3V3Z M17 3H21V7H17V3Z M3 17H7V21H3V17Z M17 17H21V21H17V17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> -->
         <!--   </svg> -->
       <!-- </button> -->
        
        <canvas id="gameCanvas"></canvas>
        
        <div id="hud">
            <div id="score">–°—á—ë—Ç: 0</div>
            <div id="speed">–°–∫–æ—Ä–æ—Å—Ç—å: 1.0x</div>
        </div>
        
        <button id="jumpButton">–ü–†–´–ñ–û–ö</button>
        
        <div id="startScreen" class="screen">
            <h1>‚ùÑÔ∏è Shashkin SnowRide ‚ùÑÔ∏è</h1>
            <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–Ω–µ–≥–æ—Ö–æ–¥–æ–º, –ø—Ä—ã–≥–∞–π—Ç–µ —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –∏ —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø—Ä–æ–µ—Ö–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –¥–∞–ª—å—à–µ!</p>
            <p style="color: #69f0ae; font-size: 16px;">–ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ - –Ω–∏–∑–∫–∏–π –ø—Ä—ã–∂–æ–∫<br>–î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ - –≤—ã—Å–æ–∫–∏–π –ø—Ä—ã–∂–æ–∫</p>
            <button id="startButton" class="button">–°–¢–ê–†–¢</button>
            <div class="controls">
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–†–û–ë–ï–õ, –°–¢–†–ï–õ–ö–ê –í–í–ï–†–•, –ö–õ–ò–ö –∏–ª–∏ –ö–ù–û–ü–ö–ê –ü–†–´–ñ–ö–ê<br>
                –õ—É—á—à–∏–π —Å—á—ë—Ç: <span id="bestScore">0</span>
            </div>
        </div>
        
        <div id="gameOverScreen" class="screen">
            <h2>–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
            <p>–í–∞—à —Å—á—ë—Ç: <span id="finalScore">0</span></p>
            <p>–õ—É—á—à–∏–π —Å—á—ë—Ç: <span id="highScore">0</span></p>
            <button id="restartButton" class="button">–ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
        </div>
        
        <div id="loading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...</div>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã DOM
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const speedElement = document.getElementById('speed');
        const jumpButton = document.getElementById('jumpButton');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const finalScoreElement = document.getElementById('finalScore');
        const highScoreElement = document.getElementById('highScore');
        const bestScoreElement = document.getElementById('bestScore');
        const loadingElement = document.getElementById('loading');
        const fullscreenPageBtn = document.getElementById('fullscreenPageBtn');

        // === –ù–ê–°–¢–†–ê–ò–í–ê–ï–ú–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ ===
        const SCALING_CONFIG = {
            baseWidth: 1000,
            baseHeight: 600,
            playerScale: 1.7,
            obstacleScale: 1.0,
            particleScale: 1.0,
            autoScale: true,
            minScale: 0.7,
            maxScale: 1.5,
        };

        // === –£–¢–ò–õ–ò–¢–ê –î–õ–Ø –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –ú–û–ë–ò–õ–¨–ù–û–ì–û –£–°–¢–†–û–ô–°–¢–í–ê ===
        // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
        function isMobileDevice() {
            return (window.innerWidth && window.innerWidth <= 768) || 
                   (navigator.userAgent && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) ||
                   window.innerHeight > window.innerWidth;
        }

        const GAME_CONFIG = {
            // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞ (15% –æ—Ç —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞)
            get playerX() { 
                return (game && game.gameWidth) ? game.gameWidth * 0.15 : 150; 
            },
            gravity: 0.6,
            // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏–ª–∞ –ø—Ä—ã–∂–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            get jumpForce() {
                const isMobile = isMobileDevice();
                if (isMobile) {
                    return {
                        short: -7,     // –ï—â—ë –±–æ–ª—å—à–µ —É–º–µ–Ω—å—à–µ–Ω–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤—ã–ª–µ—Ç–∞ –∑–∞ —ç–∫—Ä–∞–Ω
                        long: -10      // –ï—â—ë –±–æ–ª—å—à–µ —É–º–µ–Ω—å—à–µ–Ω–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤—ã–ª–µ—Ç–∞ –∑–∞ —ç–∫—Ä–∞–Ω
                    };
                } else {
                    return {
                        short: -12,
                        long: -18
                    };
                }
            },
            maxJumpHoldTime: 50, // –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –±–æ–ª–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
            baseSpeed: 6,
            speedIncreaseRate: 0.0005, // –£–≤–µ–ª–∏—á–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–±–æ—Ä–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            terrainSegmentLength: 70,
            // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –Ω–µ—Ä–æ–≤–Ω–æ—Å—Ç–µ–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            get terrainHeightVariation() {
                const isMobile = isMobileDevice();
                return isMobile ? 50 : 80; // –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–ª—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–≥–æ –≥–µ–π–º–ø–ª–µ—è
            },
            // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∑–µ–º–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            get terrainBaseHeight() {
                const isMobile = isMobileDevice();
                return isMobile ? 0.80 : 0.75; // –ï—â—ë –≤—ã—à–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏
            },
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
            difficulty: {
                initialObstacleChance: 0.010,  // –ß—É—Ç—å –±–æ–ª—å—à–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∏
                maxObstacleChance: 0.030,      // –£–≤–µ–ª–∏—á–µ–Ω –º–∞–∫—Å–∏–º—É–º
                initialMinDistance: 450,      // –£–º–µ–Ω—å—à–µ–Ω–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ —Ç–µ–º–ø–∞
                finalMinDistance: 250,        // –£–º–µ–Ω—å—à–µ–Ω–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
                difficultyIncreaseDistance: 5000,
                obstacleTypes: ['snowHeap', 'snowball', 'tree', 'hare', 'rock', 'log']
            },
            
            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 100 –æ—á–∫–æ–≤
            speedBoostInterval: 100,
            speedBoostMultiplier: 1.15, // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∫–æ—Ä–µ–Ω–∏—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ (—É–º–µ—Ä–µ–Ω–Ω—ã–π)
            
            // === –£–õ–£–ß–®–ï–ù–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –§–û–ù–û–í–û–ô –ì–†–ê–§–ò–ö–ò ===
            starCount: 100,                    // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
            mountainLayers: 3,                // –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            mountainsPerLayer: 5,             // –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—ë–∑–¥
            starsConfig: {
                size: {
                    min: 0.3,                   // –£–º–µ–Ω—å—à–µ–Ω–æ —Å 0.5 –¥–æ 0.3 (–±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ –∑–≤—ë–∑–¥—ã)
                    max: 1.2                    // –£–º–µ–Ω—å—à–µ–Ω–æ —Å 2.5 –¥–æ 1.2 (–±–æ–ª–µ–µ –¥–µ–ª–∏–∫–∞—Ç–Ω—ã–µ —è—Ä–∫–∏–µ –∑–≤—ë–∑–¥—ã)
                },
                brightness: {
                    min: 0.15,                  // –£–º–µ–Ω—å—à–µ–Ω–æ —Å 0.3 –¥–æ 0.15 (–º–µ–Ω–µ–µ —è—Ä–∫–∏–µ)
                    max: 0.6                     // –£–º–µ–Ω—å—à–µ–Ω–æ —Å 1.0 –¥–æ 0.6 (–±–æ–ª–µ–µ –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–µ)
                },
                skyArea: 0.3,                   // –£–º–µ–Ω—å—à–µ–Ω–æ —Å 0.5 –¥–æ 0.3 (—Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–µ 30% —ç–∫—Ä–∞–Ω–∞)
                twinkleIntensity: 0.15          // –£–º–µ–Ω—å—à–µ–Ω–æ –º–µ—Ä—Ü–∞–Ω–∏–µ —Å 0.3 –¥–æ 0.15
            },
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ—Ä (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤)
            mountainsConfig: {
                colors: [
                    'rgba(35, 70, 120, 0.8)',   // –ë–ª–∏–∂–Ω–∏–µ –≥–æ—Ä—ã - –±–æ–ª–µ–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ
                    'rgba(85, 110, 150, 0.7)',  // –í—Ç–æ—Ä–æ–π —Å–ª–æ–π - –±–æ–ª–µ–µ –≤–∏–¥–∏–º—ã–π
                    'rgba(140, 160, 190, 0.6)', // –¢—Ä–µ—Ç–∏–π —Å–ª–æ–π - –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω—ã–π
                    'rgba(200, 215, 240, 0.5)'  // –î–∞–ª—å–Ω–∏–µ –≥–æ—Ä—ã - –º–µ–Ω–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ
                ],
                speedFactors: [0.02, 0.015, 0.01, 0.005], // –ü–∞—Ä–∞–ª–ª–∞–∫—Å
                baseHeights: [350, 280, 210, 140], // –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –≤—ã—Å–æ—Ç—ã –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏
                heightVariations: [80, 70, 60, 50], // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏
                // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã—Å–æ—Ç –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
                getMobileAdjustedHeights() {
                    const isMobile = isMobileDevice();
                    if (isMobile) {
                        return [450, 360, 270, 180]; // –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—à–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏
                    }
                    return this.baseHeights;
                }
            },
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ø—Ä–∞–π—Ç–∞ —Å–Ω–µ–≥–æ—Ö–æ–¥–∞
            snowmobileSprite: {
                columns: 4,
                rows: 6,
                totalFrames: 24,
                frameDuration: 40 // –º—Å –Ω–∞ –∫–∞–¥—Ä (25 FPS)
            },
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø—Ä–∞–π—Ç–∞ –¥–µ—Ä–µ–≤–∞ (4x4 –º–∞—Ç—Ä–∏—Ü–∞)
            treeSprite: {
                columns: 4,
                rows: 4,
                totalFrames: 16,
                frameDuration: 80, // –º—Å –Ω–∞ –∫–∞–¥—Ä (12.5 FPS) - –º–µ–¥–ª–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
                animationSpeed: 0.015 // –°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
            },
            
            // === –ù–ê–°–¢–†–û–ô–ö–ò –ë–£–§–ï–†–ù–û–ô –ó–û–ù–´ –î–õ–Ø –ö–û–õ–õ–ò–ó–ò–ô (–ú–û–ë–ò–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø) ===
            // –ë—É—Ñ–µ—Ä–Ω–∞—è –∑–æ–Ω–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "–º–≥–Ω–æ–≤–µ–Ω–Ω—É—é —Å–º–µ—Ä—Ç—å" –ø—Ä–∏ –º–∞–ª–µ–π—à–µ–º –∫–∞—Å–∞–Ω–∏–∏
            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –¥–µ–ª–∞–µ—Ç –∏–≥—Ä—É –ª–µ–≥—á–µ, —É–º–µ–Ω—å—à–µ–Ω–∏–µ - —Å–ª–æ–∂–Ω–µ–µ
            collisionBuffer: {
                playerBuffer: -10,     // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
                obstacleBuffer: -6,   // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
                enablePlayerBuffer: true,   // –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –¥–ª—è –∏–≥—Ä–æ–∫–∞
                enableObstacleBuffer: true, // –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –¥–ª—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
                
                // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:
                // playerBuffer: –î–æ–±–∞–≤–ª—è–µ—Ç "–Ω–µ–≤–∏–¥–∏–º—É—é –∑–æ–Ω—É" –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞
                // obstacleBuffer: –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –¥–ª—è –∫–æ–ª–ª–∏–∑–∏–π
                // –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: 5-15 –ø–∏–∫—Å–µ–ª–µ–π –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π –∏–≥—Ä—ã
                
                // –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –±—É—Ñ–µ—Ä—ã (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö):
                customBuffers: {
                    snowHeap: 8,     // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è —Å—É–≥—Ä–æ–±–æ–≤
                    snowball: 10,    // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è —Å–Ω–µ–∂–∫–æ–≤ (–∫—Ä—É–≥–ª—ã–µ)
                    tree: 6,         // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è –¥–µ—Ä–µ–≤—å–µ–≤
                    hare: 12,        // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è –∑–∞–π—Ü–µ–≤ (–∂–∏–≤–æ—Ç–Ω—ã–µ)
                    rock: 5,         // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è –∫–∞–º–Ω–µ–π
                    log: 7           // –£–≤–µ–ª–∏—á–µ–Ω –±—É—Ñ–µ—Ä –¥–ª—è –±—Ä—ë–≤–µ–Ω
                }
            }
        };

        // === –ü–û–î–†–û–ë–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ò –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ù–ê–°–¢–†–û–ô–ö–ï ===
        
        /*
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë                           SNOWRIDE - –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ù–ê–°–¢–†–û–ô–ö–ï                    ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        
        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ SnowRide! –≠—Ç–∞ –∏–≥—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π 
        –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–∞–Ω–Ω–µ—Ä –ø—Ä–æ —Å–Ω–µ–≥–æ—Ö–æ–¥ —Å –±–æ–≥–∞—Ç–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                              –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò                              ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        1. –ù–ê–°–¢–†–û–ô–ö–ò –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø (SCALING_CONFIG)
        
        ‚Ä¢ baseWidth, baseHeight: –ë–∞–∑–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è (1000x600)
        ‚Ä¢ playerScale, obstacleScale, particleScale: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
        ‚Ä¢ autoScale: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
        ‚Ä¢ minScale, maxScale: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–± (0.7-1.5)
        
        –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
        - –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è autoScale: true
        - –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å autoScale: false –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
        - –ò–∑–º–µ–Ω–µ–Ω–∏–µ baseWidth/baseHeight –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—â—É—é –≥–µ–æ–º–µ—Ç—Ä–∏—é –∏–≥—Ä—ã
        
        2. –ù–ê–°–¢–†–û–ô–ö–ò –ò–ì–†–û–í–û–ô –ú–ï–•–ê–ù–ò–ö–ò (GAME_CONFIG)
        
        ‚îå‚îÄ –î–í–ò–ñ–ï–ù–ò–ï –ò –§–ò–ó–ò–ö–ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ playerX: X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –∏–≥—Ä–æ–∫–∞ (250)                                         ‚îÇ
        ‚îÇ gravity: –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è (0.6) - –±–æ–ª—å—à–µ = –±—ã—Å—Ç—Ä–µ–µ –ø–∞–¥–µ–Ω–∏–µ                     ‚îÇ
        ‚îÇ baseSpeed: –ë–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä—ã (6)                                       ‚îÇ
        ‚îÇ speedIncreaseRate: –°–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (0.0005)                 ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –°–ò–°–¢–ï–ú–ê –ü–†–´–ñ–ö–û–í ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ jumpForce.short: –°–∏–ª–∞ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –ø—Ä—ã–∂–∫–∞ (-12)                               ‚îÇ
        ‚îÇ jumpForce.long: –°–∏–ª–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–∞ (-18)                                ‚îÇ
        ‚îÇ maxJumpHoldTime: –ú–∞–∫—Å. –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä—ã–∂–∫–∞ (70–º—Å)                      ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ –ú–ï–•–ê–ù–ò–ö–ê –ü–†–´–ñ–ö–û–í:                                                          ‚îÇ
        ‚îÇ ‚Ä¢ –ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (< 200–º—Å) = –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä—ã–∂–æ–∫                            ‚îÇ
        ‚îÇ ‚Ä¢ –î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (> 200–º—Å) = –≤—ã—Å–æ–∫–∏–π –ø—Ä—ã–∂–æ–∫                             ‚îÇ
        ‚îÇ ‚Ä¢ –£–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–æ maxJumpHoldTime = –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä—ã–∂–æ–∫                     ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –ì–ï–ù–ï–†–ê–¶–ò–Ø –ü–†–ï–ü–Ø–¢–°–¢–í–ò–ô ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ obstacleTypes: ['snowHeap', 'snowball', 'tree', 'hare', 'rock', 'log']     ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ difficulty:                                                                 ‚îÇ
        ‚îÇ ‚Ä¢ initialObstacleChance: –ù–∞—á–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (0.008)             ‚îÇ
        ‚îÇ ‚Ä¢ maxObstacleChance: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ (0.025)                          ‚îÇ
        ‚îÇ ‚Ä¢ initialMinDistance: –ù–∞—á. –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏ (500) ‚îÇ
        ‚îÇ ‚Ä¢ finalMinDistance: –ö–æ–Ω–µ—á–Ω–æ–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (300)                  ‚îÇ
        ‚îÇ ‚Ä¢ difficultyIncreaseDistance: –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è (5000)      ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –°–ö–û–†–û–°–¢–ù–´–ï –ë–£–°–¢–´ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ speedBoostInterval: –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –±—É—Å—Ç–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ (100 –æ—á–∫–æ–≤)                ‚îÇ
        ‚îÇ speedBoostMultiplier: –ú–Ω–æ–∂–∏—Ç–µ–ª—å —É—Å–∫–æ—Ä–µ–Ω–∏—è (1.15)                          ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ –ö–ê–ñ–î–´–ï 300 –û–ß–ö–û–í: —Å–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Ä–∞—Å—Ç—ë—Ç –≤ 1.3 —Ä–∞–∑–∞                    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –ë–£–§–ï–†–ù–ê–Ø –ó–û–ù–ê –î–õ–Ø –ö–û–õ–õ–ò–ó–ò–ô ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ collisionBuffer:                                                            ‚îÇ
        ‚îÇ ‚Ä¢ playerBuffer: –ë—É—Ñ–µ—Ä –∏–≥—Ä–æ–∫–∞ (8px) - "–Ω–µ–≤–∏–¥–∏–º–∞—è –∑–æ–Ω–∞" –≤–æ–∫—Ä—É–≥ —Å–Ω–µ–≥–æ—Ö–æ–¥–∞    ‚îÇ
        ‚îÇ ‚Ä¢ obstacleBuffer: –ë—É—Ñ–µ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (4px) - —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–æ–ª–ª–∏–∑–∏–π     ‚îÇ
        ‚îÇ ‚Ä¢ enablePlayerBuffer: –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –∏–≥—Ä–æ–∫–∞ (true)                        ‚îÇ
        ‚îÇ ‚Ä¢ enableObstacleBuffer: –í–∫–ª—é—á–∏—Ç—å –±—É—Ñ–µ—Ä –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π (true)                 ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ customBuffers - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –±—É—Ñ–µ—Ä—ã –¥–ª—è —Ç–∏–ø–æ–≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π:              ‚îÇ
        ‚îÇ ‚Ä¢ snowHeap: 6px (—Å—É–≥—Ä–æ–±—ã)                                                  ‚îÇ
        ‚îÇ ‚Ä¢ snowball: 8px (—Å–Ω–µ–∂–∫–∏ - –∫—Ä—É–≥–ª—ã–µ, –±–æ–ª—å—à–µ –±—É—Ñ–µ—Ä)                         ‚îÇ
        ‚îÇ ‚Ä¢ tree: 4px (–¥–µ—Ä–µ–≤—å—è)                                                      ‚îÇ
        ‚îÇ ‚Ä¢ hare: 10px (–∑–∞–π—Ü—ã - –∂–∏–≤—ã–µ, –±–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä)                               ‚îÇ
        ‚îÇ ‚Ä¢ rock: 3px (–∫–∞–º–Ω–∏)                                                        ‚îÇ
        ‚îÇ ‚Ä¢ log: 5px (–±—Ä–µ–≤–Ω–∞)                                                        ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ –ù–ê–°–¢–†–û–ô–ö–ê –°–õ–û–ñ–ù–û–°–¢–ò:                                                       ‚îÇ
        ‚îÇ ‚Ä¢ –£–í–ï–õ–ò–ß–ò–¢–¨ –±—É—Ñ–µ—Ä—ã = –∏–≥—Ä–∞ –ª–µ–≥—á–µ (–±–æ–ª—å—à–µ "–ø—Ä–æ—â–µ–Ω–∏—è")                      ‚îÇ
        ‚îÇ ‚Ä¢ –£–ú–ï–ù–¨–®–ò–¢–¨ –±—É—Ñ–µ—Ä—ã = –∏–≥—Ä–∞ —Å–ª–æ–∂–Ω–µ–µ (—Ç–æ—á–Ω—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏)                      ‚îÇ
        ‚îÇ ‚Ä¢ 0px = —Ç–æ—á–Ω—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏ –±–µ–∑ "–ø—Ä–æ—â–µ–Ω–∏—è"                                    ‚îÇ
        ‚îÇ ‚Ä¢ 10-15px = –æ—á–µ–Ω—å –ª—ë–≥–∫–∞—è –∏–≥—Ä–∞                                            ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ –í–ò–ó–£–ê–õ–¨–ù–´–ï –≠–§–§–ï–ö–¢–´ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ starCount: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥ (200)                                          ‚îÇ
        ‚îÇ mountainLayers: –°–ª–æ—ë–≤ –≥–æ—Ä (4)                                              ‚îÇ
        ‚îÇ mountainsPerLayer: –ì–æ—Ä –≤ –∫–∞–∂–¥–æ–º —Å–ª–æ–µ (6)                                   ‚îÇ
        ‚îÇ                                                                             ‚îÇ
        ‚îÇ snowmobileSprite: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–∞                               ‚îÇ
        ‚îÇ ‚Ä¢ columns, rows: –†–∞–∑–º–µ—Ä—ã —Å–ø—Ä–∞–π—Ç—à–∏—Ç–∞ (4x6)                                  ‚îÇ
        ‚îÇ ‚Ä¢ totalFrames: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤ (24)                                ‚îÇ
        ‚îÇ ‚Ä¢ frameDuration: –í—Ä–µ–º—è –∫–∞–¥—Ä–∞ –≤ –º—Å (40 = 25 FPS)                           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                            –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –°–û–í–ï–¢–´                             ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        üéÆ –î–õ–Ø –ù–ê–ß–ò–ù–ê–Æ–©–ò–• –ò–ì–†–û–ö–û–í:
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ playerBuffer –¥–æ 12-15
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ customBuffers –Ω–∞ 2-3 –¥–ª—è –≤—Å–µ—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π  
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ speedIncreaseRate –¥–æ 0.0001
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ initialObstacleChance –¥–æ 0.01
        
        üéØ –î–õ–Ø –û–ü–´–¢–ù–´–• –ò–ì–†–û–ö–û–í:
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ playerBuffer –¥–æ 4-6
        ‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ enablePlayerBuffer: false –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ speedIncreaseRate –¥–æ 0.0003
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ maxObstacleChance –¥–æ 0.04
        
        üì± –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í (–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ê–î–ê–ü–¢–ò–†–û–í–ê–ù–´):
        ‚Ä¢ jumpForce.short: -7, jumpForce.long: -10 (–µ—â—ë –±–æ–ª—å—à–µ —É–º–µ–Ω—å—à–µ–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤—ã–ª–µ—Ç–∞ –∑–∞ —ç–∫—Ä–∞–Ω)
        ‚Ä¢ maxJumpHoldTime: 50–º—Å –¥–ª—è –±–æ–ª–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        ‚Ä¢ playerBuffer: 10 (–ø–∞–ª—å—Ü—ã –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã)
        ‚Ä¢ terrainHeightVariation: 50px (—É–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–≥–æ –≥–µ–π–º–ø–ª–µ—è –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö)
        ‚Ä¢ terrainBaseHeight: 0.80 (–ø–æ–¥–Ω—è—Ç–æ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏)
        ‚Ä¢ –ì–æ—Ä—ã: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–µ–Ω—ã –≤ –≤—ã—Å–æ—Ç–µ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ (450, 360, 270, 180px)
        ‚Ä¢ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: —É–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤—ë–∑–¥ –∏ –≥–æ—Ä –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
        
        ‚ö° –î–õ–Ø –í–´–°–û–ö–û–ô –°–õ–û–ñ–ù–û–°–¢–ò:
        ‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –±—É—Ñ–µ—Ä—ã –≤ 0
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ speedIncreaseRate –¥–æ 0.0005
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç–µ minDistance –¥–æ 150
        ‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ obstacleChance –¥–æ 0.05
        
        üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò:
        ‚Ä¢ terrainSegmentLength: –î–ª–∏–Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ –∑–µ–º–ª–∏ (70px)
        ‚Ä¢ terrainHeightVariation: –í—ã variation –∑–µ–º–ª–∏ (80px) 
        ‚Ä¢ terrainBaseHeight: –ë–∞–∑–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞ –∑–µ–º–ª–∏ (0.75-0.78 = –∞–¥–∞–ø—Ç–∏–≤–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö)
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                              –¢–ò–ü–´ –ü–†–ï–ü–Ø–¢–°–¢–í–ò–ô                              ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        üèîÔ∏è  SNOWHEAP (–°—É–≥—Ä–æ–±): –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ, —Å—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
        ‚ö™ SNOWBALL (–°–Ω–µ–∂–æ–∫): –ö—Ä—É–≥–ª–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ, –∫–∞—Ç–∏—Ç—Å—è –∏ –≤—Ä–∞—â–∞–µ—Ç—Å—è  
        üå≤ TREE (–î–µ—Ä–µ–≤–æ): –í—ã—Å–æ–∫–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ —Å –∫—Ä–æ–Ω–æ–π –∏ —Å—Ç–≤–æ–ª–æ–º
        üê∞ HARE (–ó–∞—è—Ü): –ñ–∏–≤–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ, –ø—Ä—ã–≥–∞–µ—Ç –∏ –¥–≤–∏–≥–∞–µ—Ç—Å—è
        ü™® ROCK (–ö–∞–º–µ–Ω—å): –ù–µ–±–æ–ª—å—à–æ–µ –ø—Ä–æ—á–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ
        ü™µ LOG (–ë—Ä–µ–≤–Ω–æ): –î–ª–∏–Ω–Ω–æ–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ –Ω–∞ –∑–µ–º–ª–µ
        
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                              –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨                             ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        
        –î–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç—å starCount –¥–æ 100
        ‚Ä¢ –£–º–µ–Ω—å—à–∏—Ç—å mountainLayers –¥–æ 2
        ‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å frameDuration –¥–æ 60 (16 FPS)
        ‚Ä¢ –û—Ç–∫–ª—é—á–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
        
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë  –£–¥–∞—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–∏—è—Ç–Ω–æ–π –∏–≥—Ä—ã! üöó‚ùÑÔ∏è                                  ‚ïë
        ‚ïë  –ò–∑–º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç                      ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        */

        // === –†–ê–°–ß–Å–¢ –¢–ï–ö–£–©–ï–ì–û –ú–ê–°–®–¢–ê–ë–ê –° –£–õ–£–ß–®–ï–ù–ù–´–ú –ú–û–ë–ò–õ–¨–ù–´–ú –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï–ú ===
        function calculateCurrentScale() {
            if (!SCALING_CONFIG.autoScale) {
                return {
                    scale: 1.0,
                    width: SCALING_CONFIG.baseWidth,
                    height: SCALING_CONFIG.baseHeight
                };
            }
            
            const container = document.getElementById('gameContainer');
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
            const isMobile = isMobileDevice();
            
            // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ –≤—ã—Å–æ—Ç–µ, –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ - –ø–æ —à–∏—Ä–∏–Ω–µ
            let scale;
            if (isMobile) {
                // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –ø–æ –≤—ã—Å–æ—Ç–µ, –Ω–æ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ–º –±–∞–∑–æ–≤—É—é —à–∏—Ä–∏–Ω—É
                scale = Math.min(containerHeight / SCALING_CONFIG.baseHeight, containerWidth / SCALING_CONFIG.baseWidth);
            } else {
                // –î–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞: –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –ø–æ —à–∏—Ä–∏–Ω–µ
                scale = containerWidth / SCALING_CONFIG.baseWidth;
            }
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞—Å—à—Ç–∞–±
            scale = Math.max(
                SCALING_CONFIG.minScale,
                Math.min(SCALING_CONFIG.maxScale, scale)
            );
            
            // –í—ã—á–∏—Å–ª—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
            const finalWidth = Math.min(SCALING_CONFIG.baseWidth * scale, containerWidth);
            const finalHeight = Math.min(SCALING_CONFIG.baseHeight * scale, containerHeight);
            
            // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –º–∞—Å—à—Ç–∞–± —Å —É—á—ë—Ç–æ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
            const finalScale = Math.min(finalWidth / SCALING_CONFIG.baseWidth, finalHeight / SCALING_CONFIG.baseHeight);
            
            return { 
                scale: finalScale, 
                width: finalWidth, 
                height: finalHeight 
            };
        }

        // –†–µ—Å—É—Ä—Å—ã –∏–≥—Ä—ã
        const assets = {
            snowmobileSprite: null, // –°–ø—Ä–∞–π—Ç—à–∏—Ç —Å–Ω–µ–≥–æ—Ö–æ–¥–∞
            snowmobileStatic: null, // –°—Ç–∞—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (fallback)
            snowHeapImg: null,
            snowballImg: null,
            treeImg: null,
            hareImg: null,
            rockImg: null,
            logImg: null,
            loaded: 0,
            total: 0
        };

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let game = {
            running: false,
            score: 0,
            speed: GAME_CONFIG.baseSpeed,
            gameTime: 0,
            highScore: localStorage.getItem('snowride_highscore') || 0,
            distanceSinceLastObstacle: 0,
            currentScale: 1.0,
            gameWidth: SCALING_CONFIG.baseWidth,
            gameHeight: SCALING_CONFIG.baseHeight,
            animationTime: 0,
            lastFrameTime: 0,
            
            // –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
            baseSpeedIncreaseRate: GAME_CONFIG.speedIncreaseRate,
            currentSpeedIncreaseRate: GAME_CONFIG.speedIncreaseRate,
            
            // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            currentDifficulty: {
                obstacleChance: GAME_CONFIG.difficulty.initialObstacleChance,
                minDistance: GAME_CONFIG.difficulty.initialMinDistance
            },
            
            // –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–∞ —Å–Ω–µ–≥–æ—Ö–æ–¥–∞
            spriteFrame: 0,
            spriteTimer: 0,
            
            // –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–µ—Ä–µ–≤–∞
            treeSpriteFrame: 0,
            treeSpriteTimer: 0,
            
            // –î–ª—è —Ä—ã–≤–∫–∞ –≤ –≤–æ–∑–¥—É—Ö–µ (–ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è)
            airBoostUsed: false,       // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ª–∏ —Ä—ã–≤–æ–∫ –≤ –≤–æ–∑–¥—É—Ö–µ
            airBoostRotation: 0,       // –¢–µ–∫—É—â–∏–π —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –ø—Ä–∏ —Ä—ã–≤–∫–µ
            airBoostVx: 0,             // –í–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è –≤–ø–µ—Ä—ë–¥ –ø—Ä–∏ —Ä—ã–≤–∫–µ
            airBoostVxDecay: 0.93,     // –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ (—á–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ)
            airBoostDuration: 15       // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä—ã–≤–∫–∞
        };

        // –ò–≥—Ä–æ–∫
        let player = {
            x: GAME_CONFIG.playerX,
            y: 0,
            baseWidth: 80,
            baseHeight: 40,
            get width() { return this.baseWidth * SCALING_CONFIG.playerScale * game.currentScale; },
            get height() { return this.baseHeight * SCALING_CONFIG.playerScale * game.currentScale; },
            vy: 0,
            isJumping: false,
            rotation: 0,
            
            // –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä—ã–∂–∫–æ–º
            isJumpHeld: false,
            jumpStartTime: 0,
            jumpHoldTime: 0,
            jumpType: 'short'
        };

        // –õ–∞–Ω–¥—à–∞—Ñ—Ç
        let terrain = [];
        let terrainPoints = [];

        // –ó–≤—ë–∑–¥—ã –¥–ª—è –Ω–µ–±–∞
        let stars = [];

        // –û–±–ª–∞–∫–∞ –¥–ª—è –±–æ–ª–µ–µ –∫—Ä–∞—Å–∏–≤–æ–≥–æ –Ω–µ–±–∞
        let clouds = [];

        // –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        let obstacles = [];

        // –ß–∞—Å—Ç–∏—Ü—ã
        let particles = [];

        // –ü–∞—Ä–∞–ª–ª–∞–∫—Å-—Å–ª–æ–∏ (–≥–æ—Ä—ã) - –±–µ–∑ —Å–Ω–µ–∂–Ω—ã—Ö —à–∞–ø–æ–∫
        let mountains = [];

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function loadImage(src, name) {
            return new Promise((resolve, reject) => {
                assets.total++;
                const img = new Image();
                
                img.onload = () => {
                    assets[name] = img;
                    assets.loaded++;
                    console.log(`–ó–∞–≥—Ä—É–∂–µ–Ω: ${src}`);
                    resolve(img);
                };
                img.onerror = () => {
                    console.log(`–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${src} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`);
                    assets.loaded++;
                    resolve(null);
                };
                img.src = src;
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
        async function loadAssets() {
            loadingElement.style.display = 'block';
            
            try {
                // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø—Ä–∞–π—Ç—à–∏—Ç
                await Promise.all([
                    loadImage('snowride-sheet.png', 'snowmobileSprite').then((sprite) => {
                        if (!sprite) {
                            // –ï—Å–ª–∏ —Å–ø—Ä–∞–π—Ç—à–∏—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–±—É–µ–º —Å—Ç–∞—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                            return loadImage('snowride.png', 'snowmobileStatic');
                        }
                        return sprite;
                    }),
                    loadImage('snowheap.png', 'snowHeapImg'),
                    loadImage('snowball.png', 'snowballImg'),
                    loadImage('tree.png', 'treeImg'),
                    loadImage('tree-sheet.png', 'treeImg'),
                    loadImage('hare.png', 'hareImg'),
                    loadImage('rock.png', 'rockImg'),
                    loadImage('log.png', 'logImg')
                ]);
            } catch (error) {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:', error);
            }
            
            loadingElement.style.display = 'none';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        async function init() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
            await loadAssets();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª—É—á—à–µ–≥–æ —Å—á–µ—Ç–∞
            bestScoreElement.textContent = game.highScore;
            highScoreElement.textContent = game.highScore;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤—ë–∑–¥
            initStars();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–ª–∞–∫–æ–≤
            initClouds();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
            initTerrain();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø—Ä–∞–π—Ç—à–∏—Ç–∞ –¥–µ—Ä–µ–≤–∞
            if (assets.treeImg) {
                const expectedFrameWidth = assets.treeImg.width / GAME_CONFIG.treeSprite.columns;
                const expectedFrameHeight = assets.treeImg.height / GAME_CONFIG.treeSprite.rows;
                console.log(`Tree sprite loaded: ${assets.treeImg.width}x${assets.treeImg.height}, frame: ${expectedFrameWidth}x${expectedFrameHeight}`);
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–∞–∫—Å-–≥–æ—Ä
            initMountains();
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞
            player.y = game.gameHeight * 0.65 - player.height / 2;
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            setupEventListeners();
            
            // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–∞–Ω–≤–∞—Å–∞
            resizeCanvas();
            
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
            game.lastFrameTime = Date.now();
            requestAnimationFrame(gameLoop);
        }

        // === –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ó–í–Å–ó–î ===
        function initStars() {
            stars = [];
            const starsConfig = GAME_CONFIG.starsConfig;
            
            for (let i = 0; i < GAME_CONFIG.starCount; i++) {
                stars.push({
                    // –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –≤—Å–µ–π —à–∏—Ä–∏–Ω–µ —ç–∫—Ä–∞–Ω–∞
                    x: Math.random() * (game.gameWidth + 200) - 100, // +200/-100 –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è
                    // –¢–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å –Ω–µ–±–∞
                    y: Math.random() * game.gameHeight * starsConfig.skyArea,
                    size: Math.random() * (starsConfig.size.max - starsConfig.size.min) + starsConfig.size.min,
                    speed: Math.random() * 0.12 + 0.03,     // –ë–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
                    brightness: Math.random() * (starsConfig.brightness.max - starsConfig.brightness.min) + starsConfig.brightness.min,
                    twinkleSpeed: Math.random() * 0.03 + 0.01, // –ë–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ –º–µ—Ä—Ü–∞–Ω–∏–µ
                    twinkleOffset: Math.random() * Math.PI * 2,
                    // –ë–æ–ª–µ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∑–≤—ë–∑–¥
                    color: Math.random() > 0.8 ? '#b3e5fc' :  // –ì–æ–ª—É–±–æ–≤–∞—Ç—ã–µ –∑–≤—ë–∑–¥—ã
                           Math.random() > 0.6 ? '#fff8dc' :  // –¢—ë–ø–ª—ã–µ –∑–≤—ë–∑–¥—ã  
                           Math.random() > 0.4 ? '#e6e6fa' :  // –õ–∞–≤–∞–Ω–¥–æ–≤—ã–µ –∑–≤—ë–∑–¥—ã
                           '#ffffff'                         // –ë–µ–ª—ã–µ –∑–≤—ë–∑–¥—ã
                });
            }
        }

        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –û–ë–õ–ê–ö–û–í ===
        function initClouds() {
            clouds = [];
            const cloudCount = Math.floor(GAME_CONFIG.starCount * 0.15); // 15% –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–≤—ë–∑–¥
            
            for (let i = 0; i < cloudCount; i++) {
                clouds.push({
                    x: Math.random() * game.gameWidth,
                    y: Math.random() * game.gameHeight * 0.25, // –í–µ—Ä—Ö–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å —ç–∫—Ä–∞–Ω–∞
                    width: Math.random() * 80 + 40, // 40-120px
                    height: Math.random() * 30 + 20, // 20-50px
                    speed: Math.random() * 0.8 + 0.2, // 0.2-1.0
                    opacity: Math.random() * 0.3 + 0.1, // 0.1-0.4
                    puffs: Math.floor(Math.random() * 3) + 2 // 2-4 –∫–æ–º–∫–∞ –æ–±–ª–∞–∫–∞
                });
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞ (—Å—Ç–∞—Ä—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
        function initTerrain() {
            terrainPoints = [];
            
            for (let x = -GAME_CONFIG.terrainSegmentLength; x <= game.gameWidth + GAME_CONFIG.terrainSegmentLength * 20; x += GAME_CONFIG.terrainSegmentLength) {
                let baseY = game.gameHeight * GAME_CONFIG.terrainBaseHeight;
                let variation = Math.sin(x * 0.01) * GAME_CONFIG.terrainHeightVariation * 0.5;
                let randomY = (Math.random() - 0.5) * GAME_CONFIG.terrainHeightVariation * 0.2;
                let y = baseY + variation + randomY;
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É
                let minHeight = game.gameHeight * 0.35;
                let maxHeight = game.gameHeight * 0.8;
                y = Math.max(minHeight, Math.min(maxHeight, y));
                
                terrainPoints.push({x, y});
            }
            
            updateTerrain();
        }

        // === –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ì–û–† (–ê–î–ê–ü–¢–ò–í–ù–ê–Ø –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–•) ===
        function initMountains() {
            mountains = [];
            
            const mountainsConfig = GAME_CONFIG.mountainsConfig;
            const isMobile = isMobileDevice();
            
            // –ü–æ–ª—É—á–∞–µ–º –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤—ã—Å–æ—Ç—ã
            const baseHeights = isMobile ? mountainsConfig.getMobileAdjustedHeights() : mountainsConfig.baseHeights;
            
            for (let layer = 0; layer < GAME_CONFIG.mountainLayers; layer++) {
                let layerMountains = [];
                let count = GAME_CONFIG.mountainsPerLayer;
                let speedFactor = mountainsConfig.speedFactors[layer] || (0.02 + layer * 0.01);
                
                // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤—ã—Å–æ—Ç—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ—è
                let baseHeight = baseHeights[layer] * game.currentScale;
                
                for (let i = 0; i < count; i++) {
                    let width = (game.gameWidth / count) * (1.5 + Math.random() * 0.5);
                    // –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
                    let x = (game.gameWidth / count) * i - width * 0.1 + Math.random() * 30;
                    
                    // –ë–æ–ª—å—à–µ –≤–∞—Ä–∏–∞—Ü–∏–π –≤—ã—Å–æ—Ç—ã –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏
                    let height = baseHeight * (0.7 + Math.random() * 0.6);
                    
                    layerMountains.push({
                        x, 
                        width, 
                        height, 
                        speedFactor, 
                        color: mountainsConfig.colors[layer] || 'rgba(60, 100, 160, 0.7)',
                        baseWidth: width,
                        baseHeight: height
                    });
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–æ—Ä—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è —ç–∫—Ä–∞–Ω–∞
                for (let i = 0; i < 3; i++) { // –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 3 –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
                    let extraWidth = (game.gameWidth / count) * (1.2 + Math.random() * 0.4);
                    let extraX = -extraWidth + i * (game.gameWidth + extraWidth);
                    let extraHeight = baseHeight * (0.6 + Math.random() * 0.6);
                    
                    layerMountains.push({
                        x: extraX, 
                        width: extraWidth, 
                        height: extraHeight, 
                        speedFactor, 
                        color: mountainsConfig.colors[layer] || 'rgba(60, 100, 160, 0.7)',
                        baseWidth: extraWidth,
                        baseHeight: extraHeight
                    });
                }
                
                mountains.push(layerMountains);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –≥–æ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–∞—Å—à—Ç–∞–±–∞ (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ)
        function updateMountainsScale() {
            const mountainsConfig = GAME_CONFIG.mountainsConfig;
            const isMobile = isMobileDevice();
            const baseHeights = isMobile ? mountainsConfig.getMobileAdjustedHeights() : mountainsConfig.baseHeights;
            
            for (let layer = 0; layer < mountains.length; layer++) {
                let layerMountains = mountains[layer];
                const originalBaseHeight = baseHeights[layer];
                
                for (let mountain of layerMountains) {
                    mountain.width = mountain.baseWidth * (game.gameWidth / SCALING_CONFIG.baseWidth);
                    
                    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã
                    const heightRatio = mountain.baseHeight / (originalBaseHeight * (isMobile ? 1.0 : 1.0));
                    mountain.height = originalBaseHeight * game.currentScale * heightRatio * (0.8 + Math.random() * 0.4);
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã
        function updateDifficulty() {
            let progress = Math.min(game.score / GAME_CONFIG.difficulty.difficultyIncreaseDistance, 1.0);
            
            game.currentDifficulty.obstacleChance = 
                GAME_CONFIG.difficulty.initialObstacleChance + 
                (GAME_CONFIG.difficulty.maxObstacleChance - GAME_CONFIG.difficulty.initialObstacleChance) * progress;
            
            game.currentDifficulty.minDistance = 
                GAME_CONFIG.difficulty.initialMinDistance - 
                (GAME_CONFIG.difficulty.initialMinDistance - GAME_CONFIG.difficulty.finalMinDistance) * progress;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å —É—á—ë—Ç–æ–º –±—É—Å—Ç–∞ –∫–∞–∂–¥—ã–µ 300 –æ—á–∫–æ–≤
        function updateSpeedWithBoost() {
            // –ö–∞–∂–¥—ã–µ 300 –æ—á–∫–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
            const boostLevel = Math.floor(game.score / GAME_CONFIG.speedBoostInterval);
            game.currentSpeedIncreaseRate = game.baseSpeedIncreaseRate * 
                Math.pow(GAME_CONFIG.speedBoostMultiplier, boostLevel);
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–µ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞
            game.speed = GAME_CONFIG.baseSpeed + game.gameTime * game.currentSpeedIncreaseRate;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–∞ —Å–Ω–µ–≥–æ—Ö–æ–¥–∞
        function updateSpriteAnimation(deltaTime) {
            if (!assets.snowmobileSprite) return;
            
            game.spriteTimer += deltaTime;
            if (game.spriteTimer >= GAME_CONFIG.snowmobileSprite.frameDuration) {
                game.spriteTimer = 0;
                game.spriteFrame = (game.spriteFrame + 1) % GAME_CONFIG.snowmobileSprite.totalFrames;
            }
        }

        // === –û–ë–ù–û–í–õ–ï–ù–ò–ï –ê–ù–ò–ú–ê–¶–ò–ò –î–ï–†–ï–í–ê ===
        function updateTreeAnimation(deltaTime) {
            if (!assets.treeImg) return;
            
            game.treeSpriteTimer += deltaTime;
            if (game.treeSpriteTimer >= GAME_CONFIG.treeSprite.frameDuration) {
                game.treeSpriteTimer = 0;
                game.treeSpriteFrame = (game.treeSpriteFrame + 1) % GAME_CONFIG.treeSprite.totalFrames;
            }
        }
            
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
        function updateTerrain() {
            for (let i = 0; i < terrainPoints.length; i++) {
                terrainPoints[i].x -= game.speed;
            }
            
            while (terrainPoints.length > 0 && terrainPoints[0].x < -GAME_CONFIG.terrainSegmentLength * 2) {
                terrainPoints.shift();
            }
            
            let lastPoint = terrainPoints[terrainPoints.length - 1];
            while (lastPoint.x < game.gameWidth + GAME_CONFIG.terrainSegmentLength * 10) {
                let x = lastPoint.x + GAME_CONFIG.terrainSegmentLength;
                let baseY = game.gameHeight * GAME_CONFIG.terrainBaseHeight;
                let variation = Math.sin(x * 0.01) * GAME_CONFIG.terrainHeightVariation * 0.5;
                let randomY = (Math.random() - 0.5) * GAME_CONFIG.terrainHeightVariation * 0.2;
                let y = baseY + variation + randomY;
                
                let minHeight = game.gameHeight * 0.35;
                let maxHeight = game.gameHeight * 0.8;
                y = Math.max(minHeight, Math.min(maxHeight, y));
                
                terrainPoints.push({x, y});
                lastPoint = terrainPoints[terrainPoints.length - 1];
            }
            
            terrain = [];
            terrain.push({x: -100, y: game.gameHeight + 100});
            
            for (let point of terrainPoints) {
                terrain.push({x: point.x, y: point.y});
            }
            
            terrain.push({x: terrainPoints[terrainPoints.length - 1].x, y: game.gameHeight + 100});
        }

        // === –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï –ó–í–Å–ó–î ===
        function updateStars() {
            game.animationTime += 0.01;
            const starsConfig = GAME_CONFIG.starsConfig;
            
            for (let star of stars) {
                star.x -= star.speed;
                star.twinkleOffset += star.twinkleSpeed;
                
                // –ó–≤–µ–∑–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—à–ª–∞ –∑–∞ –ª–µ–≤—ã–π –∫—Ä–∞–π
                if (star.x < -50) {
                    // –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
                    star.x = game.gameWidth + 50;
                    star.y = Math.random() * game.gameHeight * starsConfig.skyArea;
                    star.size = Math.random() * (starsConfig.size.max - starsConfig.size.min) + starsConfig.size.min;
                    star.speed = Math.random() * 0.12 + 0.03;
                    star.brightness = Math.random() * (starsConfig.brightness.max - starsConfig.brightness.min) + starsConfig.brightness.min;
                    star.twinkleSpeed = Math.random() * 0.03 + 0.01;
                    star.twinkleOffset = Math.random() * Math.PI * 2;
                    star.color = Math.random() > 0.8 ? '#b3e5fc' :
                                Math.random() > 0.6 ? '#fff8dc' :
                                Math.random() > 0.4 ? '#e6e6fa' :
                                '#ffffff';
                }
            }
        }

        // === –û–ë–ù–û–í–õ–ï–ù–ò–ï –û–ë–õ–ê–ö–û–í ===
        function updateClouds() {
            for (let cloud of clouds) {
                cloud.x -= cloud.speed;
                
                if (cloud.x + cloud.width < -50) {
                    cloud.x = game.gameWidth + 50;
                    cloud.y = Math.random() * game.gameHeight * 0.25;
                    cloud.width = Math.random() * 80 + 40;
                    cloud.height = Math.random() * 30 + 20;
                    cloud.speed = Math.random() * 0.8 + 0.2;
                    cloud.opacity = Math.random() * 0.3 + 0.1;
                    cloud.puffs = Math.floor(Math.random() * 3) + 2;
                }
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
        function generateObstacles() {
            game.distanceSinceLastObstacle += game.speed;
            
            updateDifficulty();
            
            if (game.distanceSinceLastObstacle > game.currentDifficulty.minDistance) {
                let chance = game.currentDifficulty.obstacleChance * 
                            (game.distanceSinceLastObstacle / game.currentDifficulty.minDistance);
                
                if (Math.random() < chance) {
                    let x = game.gameWidth + 100;
                    let groundY = getGroundHeightAt(x);
                    
                    let obstacleType = GAME_CONFIG.difficulty.obstacleTypes[
                        Math.floor(Math.random() * GAME_CONFIG.difficulty.obstacleTypes.length)
                    ];
                    
                    let obstacle = createObstacle(obstacleType, x, groundY);
                    
                    if (obstacle) {
                        obstacles.push(obstacle);
                        game.distanceSinceLastObstacle = 0;
                    }
                }
                
                if (game.distanceSinceLastObstacle > game.currentDifficulty.minDistance * 2) {
                    let x = game.gameWidth + 100;
                    let groundY = getGroundHeightAt(x);
                    let obstacleType = GAME_CONFIG.difficulty.obstacleTypes[
                        Math.floor(Math.random() * GAME_CONFIG.difficulty.obstacleTypes.length)
                    ];
                    let obstacle = createObstacle(obstacleType, x, groundY);
                    
                    if (obstacle) {
                        obstacles.push(obstacle);
                        game.distanceSinceLastObstacle = 0;
                    }
                }
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
        function createObstacle(type, x, groundY) {
            let baseSize = 1.0 * SCALING_CONFIG.obstacleScale * game.currentScale;
            
            switch(type) {
                case 'snowHeap':
                    return {
                        type: 'snowHeap',
                        x: x,
                        y: groundY,
                        baseWidth: 60,
                        baseHeight: 40,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#ffffff',
                        hasImage: assets.snowHeapImg !== null
                    };
                case 'snowball':
                    return {
                        type: 'snowball',
                        x: x,
                        y: groundY - 30 * game.currentScale,
                        baseRadius: 30,
                        get radius() { return this.baseRadius * baseSize; },
                        color: '#f0f8ff',
                        hasImage: assets.snowballImg !== null,
                        rotation: Math.random() * Math.PI * 2
                    };
                case 'tree':
                    return {
                        type: 'tree',
                        x: x,
                        y: groundY,
                        baseWidth: 40,
                        baseHeight: 80,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        trunkColor: '#8B4513',
                        foliageColor: '#228B22',
                        hasImage: assets.treeImg !== null,
                        // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
                        spriteFrame: Math.floor(Math.random() * GAME_CONFIG.treeSprite.totalFrames),
                        animationOffset: Math.random() * 1000 // –†–∞–∑–Ω—ã–π —Å—Ç–∞—Ä—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–µ—Ä–µ–≤—å–µ–≤
                    };
                case 'hare':
                    return {
                        type: 'hare',
                        x: x,
                        y: groundY - 20 * game.currentScale,
                        baseWidth: 40,
                        baseHeight: 30,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#f5f5f5',
                        jumpOffset: Math.random() * Math.PI * 2,
                        jumpSpeed: 0.05 + Math.random() * 0.03,
                        hasImage: assets.hareImg !== null
                    };
                case 'rock':
                    return {
                        type: 'rock',
                        x: x,
                        y: groundY - 20 * game.currentScale,
                        baseWidth: 50,
                        baseHeight: 30,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#777777',
                        hasImage: assets.rockImg !== null
                    };
                case 'log':
                    return {
                        type: 'log',
                        x: x,
                        y: groundY - 15 * game.currentScale,
                        baseWidth: 80,
                        baseHeight: 20,
                        get width() { return this.baseWidth * baseSize; },
                        get height() { return this.baseHeight * baseSize; },
                        color: '#8B4513',
                        hasImage: assets.logImg !== null
                    };
                default:
                    return null;
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã –∑–µ–º–ª–∏
        function getGroundHeightAt(x) {
            for (let i = 0; i < terrainPoints.length - 1; i++) {
                let p1 = terrainPoints[i];
                let p2 = terrainPoints[i + 1];
                
                if (x >= p1.x && x <= p2.x) {
                    let t = (x - p1.x) / (p2.x - p1.x);
                    return p1.y + (p2.y - p1.y) * t;
                }
            }
            
            return terrainPoints[terrainPoints.length - 1].y;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
        function updateObstacles() {
            generateObstacles();
            
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let obstacle = obstacles[i];
                obstacle.x -= game.speed;
                
                if (obstacle.type === 'hare') {
                    obstacle.jumpOffset += obstacle.jumpSpeed;
                    obstacle.y = getGroundHeightAt(obstacle.x) - 20 * game.currentScale + 
                                Math.sin(obstacle.jumpOffset) * 15 * game.currentScale;
                }
                
                if (obstacle.type === 'snowball') {
                    obstacle.rotation += 0.05;
                }
                
                if (obstacle.x < -100) {
                    obstacles.splice(i, 1);
                    continue;
                }
                
                if (checkCollision(player, obstacle)) {
                    gameOver();
                    return;
                }
            }
        }

        // === –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ö–û–õ–õ–ò–ó–ò–ô –° –ë–£–§–ï–†–ù–´–ú–ò –ó–û–ù–ê–ú–ò ===
        // –ë—É—Ñ–µ—Ä–Ω—ã–µ –∑–æ–Ω—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç "–º–≥–Ω–æ–≤–µ–Ω–Ω—É—é —Å–º–µ—Ä—Ç—å" –ø—Ä–∏ –º–∞–ª–µ–π—à–µ–º –∫–∞—Å–∞–Ω–∏–∏
        // –ò–≥—Ä–æ–∫ –∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è –º–æ–≥—É—Ç "—á—É—Ç—å-—á—É—Ç—å" –Ω–∞–µ–∑–∂–∞—Ç—å –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ –±–µ–∑ –ø–æ—Ä–∞–∂–µ–Ω–∏—è
        
        /**
         * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–ª–∏–∑–∏—é –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–æ–º –∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º —Å —É—á—ë—Ç–æ–º –±—É—Ñ–µ—Ä–Ω—ã—Ö –∑–æ–Ω
         * @param {Object} player - –æ–±—ä–µ–∫—Ç –∏–≥—Ä–æ–∫–∞
         * @param {Object} obstacle - –æ–±—ä–µ–∫—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
         * @returns {boolean} true –µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–ª–ª–∏–∑–∏—è, false –∏–Ω–∞—á–µ
         */
        function checkCollision(player, obstacle) {
            // –ü–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É—Ñ–µ—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
            const bufferConfig = GAME_CONFIG.collisionBuffer;
            
            // –í—ã—á–∏—Å–ª—è–µ–º –±—É—Ñ–µ—Ä—ã —Å —É—á—ë—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∞ –∏–≥—Ä—ã
            const scaleAdjustedPlayerBuffer = bufferConfig.enablePlayerBuffer ? 
                bufferConfig.playerBuffer * game.currentScale : 0;
            
            // –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä –¥–ª—è —Ç–∏–ø–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            const obstacleSpecificBuffer = bufferConfig.customBuffers[obstacle.type] || 0;
            const scaleAdjustedObstacleBuffer = bufferConfig.enableObstacleBuffer ? 
                (obstacleSpecificBuffer + bufferConfig.obstacleBuffer) * game.currentScale : 0;
            
            // –ì—Ä–∞–Ω–∏—Ü—ã –∏–≥—Ä–æ–∫–∞ —Å –±—É—Ñ–µ—Ä–æ–º
            let playerLeft = player.x - player.width / 2 - scaleAdjustedPlayerBuffer;
            let playerRight = player.x + player.width / 2 + scaleAdjustedPlayerBuffer;
            let playerTop = player.y - player.height / 2 - scaleAdjustedPlayerBuffer;
            let playerBottom = player.y + player.height / 2 + scaleAdjustedPlayerBuffer;
            
            switch(obstacle.type) {
                case 'snowHeap':
                case 'rock':
                case 'log':
                    // –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è —Å –±—É—Ñ–µ—Ä–æ–º
                    let left = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let right = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let top = obstacle.y - obstacle.height / 2 + scaleAdjustedObstacleBuffer;
                    let bottom = obstacle.y + obstacle.height / 2 - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < left || 
                            playerLeft > right || 
                            playerBottom < top || 
                            playerTop > bottom);
                
                case 'snowball':
                    // –ö—Ä—É–≥–ª—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è (—Å–Ω–µ–∂–∫–∏) - –±—É—Ñ–µ—Ä –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Ä–∞–¥–∏—É—Å—É
                    let dx = player.x - obstacle.x;
                    let dy = player.y - obstacle.y;
                    let distance = Math.sqrt(dx * dx + dy * dy);
                    let effectivePlayerRadius = player.width / 2 + scaleAdjustedPlayerBuffer;
                    let effectiveObstacleRadius = obstacle.radius + scaleAdjustedObstacleBuffer;
                    
                    return distance < (effectivePlayerRadius + effectiveObstacleRadius);
                
                case 'tree':
                    // –î–µ—Ä–µ–≤—å—è - –æ—Å–æ–±–∞—è —Ñ–æ—Ä–º–∞ —Å —Å—Ç–≤–æ–ª–æ–º –∏ –∫—Ä–æ–Ω–æ–π
                    let treeLeft = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let treeRight = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let treeTop = obstacle.y - obstacle.height + scaleAdjustedObstacleBuffer;
                    let treeBottom = obstacle.y - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < treeLeft || 
                            playerLeft > treeRight || 
                            playerBottom < treeTop || 
                            playerTop > treeBottom);
                
                case 'hare':
                    // –ó–∞–π—Ü—ã - –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–µ, –Ω–æ –∂–∏–≤—ã–µ (–±–æ–ª—å—à–∏–π –±—É—Ñ–µ—Ä)
                    let hareLeft = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let hareRight = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let hareTop = obstacle.y - obstacle.height / 2 + scaleAdjustedObstacleBuffer;
                    let hareBottom = obstacle.y + obstacle.height / 2 - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < hareLeft || 
                            playerLeft > hareRight || 
                            playerBottom < hareTop || 
                            playerTop > hareBottom);
                    
                default:
                    // –î–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—É—é –∫–æ–ª–ª–∏–∑–∏—é
                    let defaultLeft = obstacle.x - obstacle.width / 2 + scaleAdjustedObstacleBuffer;
                    let defaultRight = obstacle.x + obstacle.width / 2 - scaleAdjustedObstacleBuffer;
                    let defaultTop = obstacle.y - obstacle.height / 2 + scaleAdjustedObstacleBuffer;
                    let defaultBottom = obstacle.y + obstacle.height / 2 - scaleAdjustedObstacleBuffer;
                    
                    return !(playerRight < defaultLeft || 
                            playerLeft > defaultRight || 
                            playerBottom < defaultTop || 
                            playerTop > defaultBottom);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ —Å –Ω–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–æ–π –ø—Ä—ã–∂–∫–æ–≤
        function updatePlayer(deltaTime) {
            const currentTime = Date.now();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä—ã–∂–∫–∞
            if (player.isJumpHeld && player.isJumping) {
                player.jumpHoldTime = currentTime - player.jumpStartTime;
                
                // –ï—Å–ª–∏ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–µ–≤—ã—Å–∏–ª–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ, –æ—Ç–ø—É—Å–∫–∞–µ–º –ø—Ä—ã–∂–æ–∫
                if (player.jumpHoldTime > GAME_CONFIG.maxJumpHoldTime) {
                    player.isJumpHeld = false;
                    player.jumpType = 'long'; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä—ã–∂–æ–∫
                } else {
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø—Ä—ã–∂–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è
                    if (player.jumpHoldTime > 200) {
                        player.jumpType = 'long';
                    } else {
                        player.jumpType = 'short';
                    }
                }
                
                // –ü—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ –ø—Ä—ã–∂–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–≤–µ—Ä—Ö
                // –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –ø—Ä—ã–∂–∫–∞ (–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è)
                const jumpForces = GAME_CONFIG.jumpForce;
                if (player.jumpType === 'long') {
                    player.vy = jumpForces.long;
                } else {
                    player.vy = jumpForces.short;
                }
            } else {
                // –ï—Å–ª–∏ –ø—Ä—ã–∂–æ–∫ –Ω–µ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –ø—Ä–∏–º–µ–Ω—è–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é
                player.vy += GAME_CONFIG.gravity;
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
            player.y += player.vy;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–µ–º–ª–∏
            let groundY = getGroundHeightAt(player.x);
            
            if (player.y > groundY - player.height / 2) {
                player.y = groundY - player.height / 2;
                player.vy = 0;
                player.isJumping = false;
                player.isJumpHeld = false;
                game.airBoostUsed = false; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ —Ä—ã–≤–∫–∞ –ø—Ä–∏ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–∏
                
                if (Math.abs(player.vy) > 5) {
                    createLandingParticles(player.x, player.y + player.height / 2);
                }
            }
            
            // === –û–ë–ù–û–í–õ–ï–ù–ò–ï –í–†–ê–©–ï–ù–ò–Ø –ò –î–í–ò–ñ–ï–ù–ò–Ø –° –ü–û–î–î–ï–†–ñ–ö–û–ô –†–´–í–ö–ê ===
            if (player.isJumping) {
                if (game.airBoostUsed && game.airBoostRotation < Math.PI * 2) {
                    // –ü–ª–∞–≤–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –ø—Ä–∏ —Ä—ã–≤–∫–µ –≤ –≤–æ–∑–¥—É—Ö–µ
                    game.airBoostRotation += 0.25;
                    player.rotation = Math.sin(game.airBoostRotation) * 0.8;
                } else {
                    // –û–±—ã—á–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä—ã–∂–∫–µ
                    player.rotation = Math.max(-0.3, player.vy * 0.02);
                }
            } else {
                player.rotation = Math.min(0.3, (player.y - (groundY - player.height / 2)) * 0.05);
            }
            
            // === –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –í–ï–ö–¢–û–†–ê –î–í–ò–ñ–ï–ù–ò–Ø –ü–†–ò –†–´–í–ö–ï ===
            if (game.airBoostVx > 0.1) {
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –≤–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è –≤–ø–µ—Ä—ë–¥
                player.x += game.airBoostVx;
                
                // –£–º–µ–Ω—å—à–∞–µ–º –≤–µ–∫—Ç–æ—Ä –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∑–∞—Ç—É—Ö–∞–Ω–∏—è
                game.airBoostVx *= game.airBoostVxDecay;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤–µ–∫—Ç–æ—Ä –∫–æ–≥–¥–∞ –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–º
                if (game.airBoostVx < 0.1) {
                    game.airBoostVx = 0;
                }
            }
        }
            
        // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –ø—Ä–∏ —Ä—ã–≤–∫–µ –≤ –≤–æ–∑–¥—É—Ö–µ
        function createAirBoostParticles(x, y) {
            let particleCount = 8; // –ú–µ–Ω—å—à–µ —á–∞—Å—Ç–∏—Ü —á–µ–º –ø—Ä–∏ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–∏
            
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: x + (Math.random() - 0.5) * 30 * game.currentScale,
                    y: y + (Math.random() - 0.5) * 20 * game.currentScale,
                    vx: (Math.random() - 0.5) * 8 * game.currentScale,
                    vy: -Math.random() * 10 * game.currentScale,
                    baseRadius: Math.random() * 3 + 1,
                    get radius() { return this.baseRadius * SCALING_CONFIG.particleScale * game.currentScale; },
                    color: '#ffffff',
                    life: 30
                });
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –ø—Ä–∏ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–∏
        function createLandingParticles(x, y) {
            let particleCount = player.jumpType === 'long' ? 20 : 10;
            
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: x + (Math.random() - 0.5) * 40 * game.currentScale,
                    y: y,
                    vx: (Math.random() - 0.5) * 10 * game.currentScale,
                    vy: -Math.random() * (player.jumpType === 'long' ? 15 : 8) * game.currentScale,
                    baseRadius: Math.random() * 5 + 2,
                    get radius() { return this.baseRadius * SCALING_CONFIG.particleScale * game.currentScale; },
                    color: '#ffffff',
                    life: 40
                });
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
        function updateParticles(deltaTime) {
            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.2 * game.currentScale;
                p.life--;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
        }

        // === –ù–ê–ß–ê–õ–û –ü–†–´–ñ–ö–ê –ò–õ–ò –†–´–í–û–ö –í –í–û–ó–î–£–•–ï ===
        function startJump() {
            if (!game.running) return;
            
            if (!player.isJumping) {
                // –û–±—ã—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫ —Å –∑–µ–º–ª–∏
                player.isJumping = true;
                player.isJumpHeld = true;
                player.jumpStartTime = Date.now();
                player.jumpHoldTime = 0;
                player.jumpType = 'short';
                game.airBoostUsed = false; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ —Ä—ã–≤–∫–∞
                
                // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä—ã–∂–æ–∫ —Å –∫–æ—Ä–æ—Ç–∫–æ–π —Å–∏–ª–æ–π (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π)
                const jumpForces = GAME_CONFIG.jumpForce;
                player.vy = jumpForces.short;
                
                // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –ø—Ä—ã–∂–∫–∞
                createLandingParticles(player.x, player.y + player.height / 2);
                
            } else if (player.isJumping && !game.airBoostUsed) {
                // –†—ã–≤–æ–∫ –≤ –≤–æ–∑–¥—É—Ö–µ - –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä—ã–∂–æ–∫ —Å –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–æ–º
                game.airBoostUsed = true;
                game.airBoostRotation = 0; // –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–≤–æ—Ä–æ—Ç
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–º–ø—É–ª—å—Å –≤–≤–µ—Ä—Ö (–±–æ–ª—å—à–µ —á–µ–º –æ–±—ã—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π)
                const jumpForces = GAME_CONFIG.jumpForce;
                player.vy = Math.min(player.vy, jumpForces.short * 0.5);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥ —á–µ—Ä–µ–∑ –≤–µ–∫—Ç–æ—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏
                game.airBoostVx = 1.5 * game.currentScale; // –í–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è –≤–ø–µ—Ä—ë–¥
                
                // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –ø—Ä–∏ —Ä—ã–≤–∫–µ
                createAirBoostParticles(player.x, player.y);
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä—ã–∂–∫–∞ (–æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏)
        function endJump() {
            if (player.isJumpHeld && game.running) {
                player.isJumpHeld = false;
                
                // –ï—Å–ª–∏ –ø—Ä—ã–∂–æ–∫ –±—ã–ª –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–º, –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä—ã–∂–æ–∫ (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π)
                if (player.jumpHoldTime < 50) {
                    player.jumpType = 'short';
                    const jumpForces = GAME_CONFIG.jumpForce;
                    player.vy = jumpForces.short;
                }
            }
        }

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            const currentTime = Date.now();
            let deltaTime = currentTime - game.lastFrameTime;
            game.lastFrameTime = currentTime;
            
            // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º deltaTime –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
            const targetFrameTime = 1000 / 60; // 60 FPS
            const normalizedDeltaTime = Math.min(deltaTime, targetFrameTime * 2); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Å–∫–∞—á–∫–∏
            const speedMultiplier = normalizedDeltaTime / targetFrameTime;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (game.running) {
                game.gameTime++;
                game.score += game.speed * 0.1 * speedMultiplier;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å —Å —É—á—ë—Ç–æ–º –±—É—Å—Ç–∞
                updateSpeedWithBoost();
                
                game.animationTime += normalizedDeltaTime * 0.001;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–ø—Ä–∞–π—Ç–æ–≤
                updateSpriteAnimation(normalizedDeltaTime);
                updateTreeAnimation(normalizedDeltaTime);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
                updateStars();
                updateClouds();
                updateTerrain();
                updatePlayer(normalizedDeltaTime);
                updateObstacles();
                updateParticles(normalizedDeltaTime);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º HUD
                scoreElement.textContent = `–°—á—ë—Ç: ${Math.floor(game.score)}`;
                speedElement.textContent = `–°–∫–æ—Ä–æ—Å—Ç—å: ${game.speed.toFixed(1)}x`;
            }
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ñ–æ–Ω–∞ –∏ –∏–≥—Ä–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
            drawSkyGradient();  // –ì—Ä–∞–¥–∏–µ–Ω—Ç –Ω–µ–±–∞
            drawClouds();       // –û–±–ª–∞–∫–∞ (–º–µ–¥–ª–µ–Ω–Ω–æ –¥–≤–∏–∂—É—â–∏–µ—Å—è)
            drawStars();        // –ó–≤—ë–∑–¥—ã
            drawMountains();    // –ì–æ—Ä—ã
            drawTerrain();      // –ó–µ–º–ª—è
            drawObstacles();    // –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            drawPlayer();       // –ò–≥—Ä–æ–∫
            drawParticles();    // –ß–∞—Å—Ç–∏—Ü—ã
            
            requestAnimationFrame(gameLoop);
        }

        // === –û–¢–†–ò–°–û–í–ö–ê –ì–†–ê–î–ò–ï–ù–¢–ê –ù–ï–ë–ê ===
        function drawSkyGradient() {
            const gradient = ctx.createLinearGradient(0, 0, 0, game.gameHeight);
            gradient.addColorStop(0, '#0a0e2a');      // –¢—ë–º–Ω–æ-—Å–∏–Ω–µ–µ –≤–≤–µ—Ä—Ö—É
            gradient.addColorStop(0.3, '#1a237e');    // –ì–ª—É–±–æ–∫–∏–π —Å–∏–Ω–∏–π
            gradient.addColorStop(0.6, '#283593');    // –°—Ä–µ–¥–Ω–∏–π —Å–∏–Ω–∏–π
            gradient.addColorStop(0.8, '#3949ab');    // –°–≤–µ—Ç–ª–µ–µ –∫ –≥–æ—Ä–∏–∑–æ–Ω—Ç—É
            gradient.addColorStop(1, '#5c6bc0');      // –°–∞–º—ã–π —Å–≤–µ—Ç–ª—ã–π —É –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, game.gameWidth, game.gameHeight);
        }

        // === –û–¢–†–ò–°–û–í–ö–ê –û–ë–õ–ê–ö–û–í ===
        function drawClouds() {
            for (let cloud of clouds) {
                ctx.globalAlpha = cloud.opacity;
                ctx.fillStyle = '#ffffff';
                
                // –†–∏—Å—É–µ–º –æ–±–ª–∞–∫–æ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫—Ä—É–≥–æ–≤
                for (let i = 0; i < cloud.puffs; i++) {
                    const puffX = cloud.x + (i * cloud.width / cloud.puffs) - cloud.width / 4;
                    const puffY = cloud.y + Math.sin(i * 0.8) * 8;
                    const puffSize = cloud.height * (0.7 + Math.sin(i) * 0.3);
                    
                    ctx.beginPath();
                    ctx.arc(puffX, puffY, puffSize, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–Ω—å –ø–æ–¥ –æ–±–ª–∞–∫–æ–º –¥–ª—è –æ–±—ä—ë–º–∞
                ctx.globalAlpha = cloud.opacity * 0.3;
                ctx.fillStyle = '#e3f2fd';
                ctx.beginPath();
                ctx.ellipse(cloud.x + cloud.width / 2, cloud.y + cloud.height / 2, 
                           cloud.width / 2, cloud.height / 3, 0, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.globalAlpha = 1;
        }

        // === –£–õ–£–ß–®–ï–ù–ù–ê–Ø –û–¢–†–ò–°–û–í–ö–ê –ó–í–Å–ó–î ===
        function drawStars() {
            const starsConfig = GAME_CONFIG.starsConfig;
            
            for (let star of stars) {
                let brightness = star.brightness + Math.sin(star.twinkleOffset + game.animationTime) * starsConfig.twinkleIntensity;
                brightness = Math.max(0.1, Math.min(starsConfig.brightness.max, brightness));
                
                // –û—Å–Ω–æ–≤–Ω–∞—è –∑–≤–µ–∑–¥–∞
                ctx.fillStyle = star.color.replace(')', `, ${brightness})`).replace('rgb', 'rgba');
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
                
                // –¢–æ–ª—å–∫–æ –¥–ª—è —Å–∞–º—ã—Ö —è—Ä–∫–∏—Ö –∑–≤—ë–∑–¥ - –æ—á–µ–Ω—å –¥–µ–ª–∏–∫–∞—Ç–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ
                if (star.size > 0.8 && brightness > 0.4) {
                    ctx.fillStyle = star.color.replace(')', `, ${brightness * 0.1})`).replace('rgb', 'rgba');
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.size * 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // === –£–õ–£–ß–®–ï–ù–ù–ê–Ø –û–¢–†–ò–°–û–í–ö–ê –ì–û–† (–ü–û–õ–ù–û–ï –ü–û–ö–†–´–¢–ò–ï) ===
        function drawMountains() {
            for (let layer = 0; layer < mountains.length; layer++) {
                let layerMountains = mountains[layer];
                let speedFactor = layerMountains[0].speedFactor;
                
                for (let mountain of layerMountains) {
                    mountain.x -= game.speed * speedFactor;
                    
                    // –£—Å–ª–æ–≤–∏–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ - –∫–æ–≥–¥–∞ –≥–æ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—à–ª–∞ –∑–∞ –ª–µ–≤—ã–π –∫—Ä–∞–π
                    if (mountain.x + mountain.width < -50) {
                        mountain.x = game.gameWidth + mountain.width * 0.2;
                        mountain.height = mountain.baseHeight * game.currentScale * (0.6 + Math.random() * 0.8);
                    }
                    
                    // –£–ª—É—á—à–µ–Ω–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ - —Ä–∏—Å—É–µ–º –≥–æ—Ä—É –µ—Å–ª–∏ –æ–Ω–∞ —Ö–æ—Ç—è –±—ã —á–∞—Å—Ç–∏—á–Ω–æ –≤–∏–¥–Ω–∞
                    if (mountain.x < game.gameWidth + 100 && mountain.x + mountain.width > -100) {
                        ctx.fillStyle = mountain.color;
                        ctx.beginPath();
                        ctx.moveTo(mountain.x, game.gameHeight);
                        ctx.lineTo(mountain.x + mountain.width / 2, game.gameHeight - mountain.height);
                        ctx.lineTo(mountain.x + mountain.width, game.gameHeight);
                        ctx.closePath();
                        ctx.fill();
                    }
                }
            }
        }
                    
        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
        function drawTerrain() {
            // –û—Å–Ω–æ–≤–Ω–æ–π —Å–Ω–µ–≥
            ctx.fillStyle = '#ffffff';
            ctx.beginPath();
            ctx.moveTo(terrain[0].x, terrain[0].y);
            
            for (let i = 1; i < terrain.length; i++) {
                ctx.lineTo(terrain[i].x, terrain[i].y);
            }
            
            ctx.closePath();
            ctx.fill();
            
            // –¢–µ–Ω–∏ –∏ —Ç–µ–∫—Å—Ç—É—Ä–∞ —Å–Ω–µ–≥–∞
            ctx.fillStyle = 'rgba(200, 220, 255, 0.1)';
            for (let i = 0; i < terrainPoints.length - 1; i += 3) {
                let p = terrainPoints[i];
                if (p.x > -50 && p.x < game.gameWidth + 50) {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 8 * game.currentScale, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
        function drawObstacles() {
            for (let obstacle of obstacles) {
                let img = null;
                
                switch(obstacle.type) {
                    case 'snowHeap': img = assets.snowHeapImg; break;
                    case 'snowball': img = assets.snowballImg; break;
                    case 'tree': img = assets.treeImg; break;
                    case 'hare': img = assets.hareImg; break;
                    case 'rock': img = assets.rockImg; break;
                    case 'log': img = assets.logImg; break;
                }
                
                if (img && obstacle.hasImage) {
                    let drawWidth = obstacle.width;
                    let drawHeight = obstacle.height;
                    
                    ctx.save();
                    
                    if (obstacle.type === 'hare') {
                        ctx.drawImage(img, obstacle.x - drawWidth/2, obstacle.y - drawHeight/2, drawWidth, drawHeight);
                    } else if (obstacle.type === 'snowball') {
                        ctx.save();
                        ctx.translate(obstacle.x, obstacle.y);
                        ctx.rotate(obstacle.rotation);
                        ctx.drawImage(img, -obstacle.radius, -obstacle.radius, 
                                    obstacle.radius * 2, obstacle.radius * 2);
                        ctx.restore();
                    } else if (obstacle.type === 'tree' && assets.treeImg) {
                        // === –ß–ò–°–¢–ê–Ø –û–¢–†–ò–°–û–í–ö–ê –î–ï–†–ï–í–ê –ò–ó –°–ü–†–ê–ô–¢–®–ò–¢–ê ===
                        const sprite = assets.treeImg;
                        
                        // –†–∞–∑–º–µ—Ä—ã –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä–∞ - –≤—ã—á–∏—Å–ª—è–µ–º —Ç–æ—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑
                        const frameW = Math.floor(sprite.width / GAME_CONFIG.treeSprite.columns);
                        const frameH = Math.floor(sprite.height / GAME_CONFIG.treeSprite.rows);
                        
                        // –¢–µ–∫—É—â–∏–π –∫–∞–¥—Ä –∞–Ω–∏–º–∞—Ü–∏–∏
                        const animFrame = (game.treeSpriteFrame + Math.floor(obstacle.animationOffset)) % GAME_CONFIG.treeSprite.totalFrames;
                        
                        // –ö–æ–ª–æ–Ω–∫–∞ –∏ —Ä—è–¥ - —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
                        const col = animFrame % GAME_CONFIG.treeSprite.columns;
                        const row = Math.floor(animFrame / GAME_CONFIG.treeSprite.columns);
                        
                        // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–¥—Ä–∞ –≤ —Å–ø—Ä–∞–π—Ç—à–∏—Ç–µ - —Ç–æ—á–Ω–æ
                        const srcX = col * frameW;
                        const srcY = row * frameH;
                        
                        // –†–∏—Å—É–µ–º –∫–∞–¥—Ä —Ç–æ—á–Ω–æ –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ
                        ctx.drawImage(
                            sprite,
                            srcX, srcY, frameW, frameH,
                            obstacle.x - drawWidth/2, obstacle.y - drawHeight, drawWidth, drawHeight
                        );
                    } else {
                        ctx.drawImage(img, obstacle.x - drawWidth/2, obstacle.y - drawHeight/2, drawWidth, drawHeight);
                    }
                    
                    ctx.restore();
                } else {
                    drawObstaclePrimitive(obstacle);
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏
        function drawObstaclePrimitive(obstacle) {
            switch(obstacle.type) {
                case 'snowHeap':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x, obstacle.y - obstacle.height/2, 
                               obstacle.width/2, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'snowball':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.arc(obstacle.x, obstacle.y, obstacle.radius, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    ctx.beginPath();
                    ctx.arc(obstacle.x - obstacle.radius*0.3, obstacle.y - obstacle.radius*0.3, 
                           obstacle.radius*0.15, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'tree':
                    ctx.fillStyle = obstacle.trunkColor;
                    ctx.fillRect(obstacle.x - obstacle.width/4, obstacle.y - obstacle.height/4, 
                               obstacle.width/2, obstacle.height/4);
                    
                    ctx.fillStyle = obstacle.foliageColor;
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x - obstacle.width/2, obstacle.y - obstacle.height/4);
                    ctx.lineTo(obstacle.x + obstacle.width/2, obstacle.y - obstacle.height/4);
                    ctx.lineTo(obstacle.x, obstacle.y - obstacle.height);
                    ctx.closePath();
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x - obstacle.width/2.5, obstacle.y - obstacle.height/2);
                    ctx.lineTo(obstacle.x + obstacle.width/2.5, obstacle.y - obstacle.height/2);
                    ctx.lineTo(obstacle.x, obstacle.y - obstacle.height*0.8);
                    ctx.closePath();
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.moveTo(obstacle.x - obstacle.width/3.5, obstacle.y - obstacle.height*0.75);
                    ctx.lineTo(obstacle.x + obstacle.width/3.5, obstacle.y - obstacle.height*0.75);
                    ctx.lineTo(obstacle.x, obstacle.y - obstacle.height*0.95);
                    ctx.closePath();
                    ctx.fill();
                    break;
                    
                case 'hare':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x, obstacle.y, obstacle.width/2, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x + obstacle.width/3, obstacle.y - obstacle.height/3, 
                               obstacle.width/4, obstacle.height/3, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x + obstacle.width/2.5, obstacle.y - obstacle.height/1.5, 
                               obstacle.width/8, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x + obstacle.width/1.8, obstacle.y - obstacle.height/1.5, 
                               obstacle.width/8, obstacle.height/2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#000000';
                    ctx.beginPath();
                    ctx.arc(obstacle.x + obstacle.width/2.2, obstacle.y - obstacle.height/3, 
                           obstacle.width/12, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'rock':
                    ctx.fillStyle = obstacle.color;
                    ctx.beginPath();
                    ctx.ellipse(obstacle.x, obstacle.y, obstacle.width/2, obstacle.height/2, 
                               Math.PI/4, 0, Math.PI * 2);
                    ctx.fill();
                    break;
                    
                case 'log':
                    ctx.fillStyle = obstacle.color;
                    ctx.fillRect(obstacle.x - obstacle.width/2, obstacle.y - obstacle.height/2, 
                               obstacle.width, obstacle.height);
                    
                    ctx.fillStyle = '#5D4037';
                    for (let i = -obstacle.width/2 + 10; i < obstacle.width/2; i += 15 * game.currentScale) {
                        ctx.fillRect(obstacle.x + i, obstacle.y - obstacle.height/2, 
                                    5 * game.currentScale, obstacle.height);
                    }
                    break;
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞ —Å–æ —Å–ø—Ä–∞–π—Ç–æ–º
        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x, player.y);
            ctx.rotate(player.rotation);
            
            if (assets.snowmobileSprite) {
                // –†–∏—Å—É–µ–º —Å–ø—Ä–∞–π—Ç –∏–∑ —Å–ø—Ä–∞–π—Ç—à–∏—Ç–∞
                const sprite = assets.snowmobileSprite;
                const frameWidth = sprite.width / GAME_CONFIG.snowmobileSprite.columns;
                const frameHeight = sprite.height / GAME_CONFIG.snowmobileSprite.rows;
                
                // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –∫–∞–¥—Ä–∞
                const col = game.spriteFrame % GAME_CONFIG.snowmobileSprite.columns;
                const row = Math.floor(game.spriteFrame / GAME_CONFIG.snowmobileSprite.columns);
                const frameX = col * frameWidth;
                const frameY = row * frameHeight;
                
                // –†–∏—Å—É–µ–º —Ç–µ–∫—É—â–∏–π –∫–∞–¥—Ä
                ctx.drawImage(
                    sprite,
                    frameX, frameY, frameWidth, frameHeight,
                    -player.width/2, -player.height/2, player.width, player.height
                );
            } else if (assets.snowmobileStatic) {
                // –†–∏—Å—É–µ–º —Å—Ç–∞—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                ctx.drawImage(assets.snowmobileStatic, -player.width/2, -player.height/2, player.width, player.height);
            } else {
                // –†–∏—Å—É–µ–º —Å–Ω–µ–≥–æ—Ö–æ–¥ –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏
                ctx.fillStyle = '#e53935';
                ctx.fillRect(-player.width/2, -player.height/2, player.width, player.height);
                
                ctx.fillStyle = '#1e88e5';
                ctx.fillRect(-player.width/4, -player.height/2 - 10 * game.currentScale, 
                           player.width/2, 15 * game.currentScale);
                
                ctx.fillStyle = '#4fc3f7';
                ctx.fillRect(-player.width/2 - 10 * game.currentScale, -player.height/4, 
                           15 * game.currentScale, 5 * game.currentScale);
                ctx.fillRect(player.width/2 - 5 * game.currentScale, -player.height/4, 
                           15 * game.currentScale, 5 * game.currentScale);
                
                ctx.fillStyle = '#333333';
                ctx.fillRect(-player.width/2, player.height/2 - 10 * game.currentScale, 
                           player.width, 8 * game.currentScale);
                
                ctx.fillStyle = '#666666';
                for (let i = -player.width/2 + 5; i < player.width/2; i += 10 * game.currentScale) {
                    ctx.fillRect(i, player.height/2 - 10 * game.currentScale, 
                               5 * game.currentScale, 8 * game.currentScale);
                }
                
                ctx.fillStyle = '#ffeb3b';
                ctx.beginPath();
                ctx.arc(-player.width/2 + 5 * game.currentScale, -player.height/4, 
                       5 * game.currentScale, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.restore();
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —á–∞—Å—Ç–∏—Ü
        function drawParticles() {
            for (let p of particles) {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 40;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fill();
            }
            ctx.globalAlpha = 1;
        }

        // === –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–´–ô –†–ï–ñ–ò–ú –í–ï–ë–ê-–°–¢–†–ê–ù–ò–¶–´ ===
        /*
        ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
        ‚ïë                        –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–´–ô –†–ï–ñ–ò–ú –í–ï–ë–ê-–°–¢–†–ê–ù–ò–¶–´                      ‚ïë
        ‚ïë                                                                              ‚ïë
        ‚ïë  –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –í–°–ï–ô –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚ïë
        ‚ïë  (–Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤). –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º     ‚ïë
        ‚ïë  —É–≥–ª—É –∏ –∏–º–µ–µ—Ç –ø–æ–Ω—è—Ç–Ω—É—é SVG-–∏–∫–æ–Ω–∫—É, –∫–æ—Ç–æ—Ä–∞—è –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞.  ‚ïë
        ‚ïë                                                                              ‚ïë
        ‚ïë  –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ü–ï–†–ï–ù–û–°–ê –í –î–†–£–ì–ò–ï –ü–†–û–ï–ö–¢–´:                                      ‚ïë
        ‚ïë  1. toggleFullscreen() - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è                       ‚ïë
        ‚ïë  2. updateFullscreenButton() - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–∫–∏                   ‚ïë
        ‚ïë  3. onFullscreenChange() - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞                       ‚ïë
        ‚ïë  4. addFullscreenEventListeners() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª–µ–π                     ‚ïë
        ‚ïë                                                                              ‚ïë
        ‚ïë  –¢–†–ï–ë–£–ï–¢–°–Ø HTML: <button id="fullscreenPageBtn" class="fullscreen-page-btn"> ‚ïë
        ‚ïë  –¢–†–ï–ë–£–ï–¢–°–Ø CSS: .fullscreen-page-btn { ... }                                ‚ïë
        ‚ïë  –¢–†–ï–ë–£–ï–¢–°–Ø JS:  const fullscreenPageBtn = document.getElementById('fullscreenPageBtn'); ‚ïë
        ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        */

        /**
         * –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê –í–ï–ë–ê-–°–¢–†–ê–ù–ò–¶–´
         * –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –º–µ–∂–¥—É –æ–±—ã—á–Ω—ã–º –∏ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–º —Ä–µ–∂–∏–º–æ–º –í–°–ï–ô —Å—Ç—Ä–∞–Ω–∏—Ü—ã
         * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã —á–µ—Ä–µ–∑ –∫—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω—ã–π API
         */
        function toggleFullscreen() {
            console.log('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã —É–∂–µ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
            if (!document.fullscreenElement) {
                // –í–•–û–î–ò–ú –í –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–´–ô –†–ï–ñ–ò–ú
                console.log('–í—Ö–æ–¥–∏–º –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º...');
                
                // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                if (document.documentElement.requestFullscreen) {
                    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ç–æ–¥ (Chrome, Firefox, Opera, Edge)
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    // Safari
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) {
                    // Internet Explorer
                    document.documentElement.msRequestFullscreen();
                } else if (document.documentElement.mozRequestFullScreen) {
                    // –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Firefox
                    document.documentElement.mozRequestFullScreen();
                } else {
                    console.warn('–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ');
                    alert('–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ');
                }
            } else {
                // –í–´–•–û–î–ò–ú –ò–ó –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
                console.log('–í—ã—Ö–æ–¥–∏–º –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞...');
                
                // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                if (document.exitFullscreen) {
                    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ç–æ–¥
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    // Safari
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    // Internet Explorer
                    document.msExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    // –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Firefox
                    document.mozCancelFullScreen();
                } else {
                    console.warn('–í—ã—Ö–æ–¥ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
                }
            }
        }
            
        /**
         * –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø –ö–ù–û–ü–ö–ò –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
         * –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
         * –ú–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç, –∏–∫–æ–Ω–∫—É –∏ tooltip –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
         */
        function updateFullscreenButton() {
            if (!fullscreenPageBtn) return; // –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            const isFullscreen = !!document.fullscreenElement;
            
            if (isFullscreen) {
                // –í –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ú –†–ï–ñ–ò–ú–ï
                console.log('–ö–Ω–æ–ø–∫–∞: –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω');
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                fullscreenPageBtn.classList.add('fullscreen-active');
                
                // –ú–µ–Ω—è–µ–º tooltip (–≤—Å–ø–ª—ã–≤–∞—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞)
                fullscreenPageBtn.title = '–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞';
                
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
                // fullscreenPageBtn.style.background = 'rgba(76, 175, 80, 0.85)';
                
            } else {
                // –í –û–ë–´–ß–ù–û–ú –†–ï–ñ–ò–ú–ï
                console.log('–ö–Ω–æ–ø–∫–∞: –æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º');
                
                // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                fullscreenPageBtn.classList.remove('fullscreen-active');
                
                // –ú–µ–Ω—è–µ–º tooltip
                fullscreenPageBtn.title = '–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã';
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ã—á–Ω—ã–π –≤–∏–¥
                // fullscreenPageBtn.style.background = 'rgba(0, 0, 0, 0.75)';
            }
        }

        /**
         * –û–ë–†–ê–ë–û–¢–ß–ò–ö –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
         * –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
         * –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É –∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
         */
        function onFullscreenChange() {
            console.log('–°–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
            updateFullscreenButton();
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
            const isFullscreen = !!document.fullscreenElement;
            
            if (isFullscreen) {
                console.log('‚úÖ –í–æ—à–ª–∏ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º');
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
                // - —Å–∫—Ä—ã—Ç—å –¥—Ä—É–≥–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã
                // - –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
                // - –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                
            } else {
                console.log('‚ùå –í—ã—à–ª–∏ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞');
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
                // - –ø–æ–∫–∞–∑–∞—Ç—å —Å–∫—Ä—ã—Ç—ã–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã
                // - –≤–µ—Ä–Ω—É—Ç—å –æ–±—ã—á–Ω—ã–µ —Å—Ç–∏–ª–∏
                // - –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            }
            
            // –í–∞–∂–Ω–æ: –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞
            // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –æ–∫–Ω–∞
            setTimeout(() => {
                if (typeof resizeCanvas === 'function') {
                    resizeCanvas();
                    console.log('–†–∞–∑–º–µ—Ä—ã –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞');
                }
            }, 100); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
        }

        /**
         * –ù–ê–°–¢–†–û–ô–ö–ê –°–õ–£–®–ê–¢–ï–õ–ï–ô –°–û–ë–´–¢–ò–ô –î–õ–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê
         * –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
         * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
         */
        function addFullscreenEventListeners() {
            console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª–µ–π –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–Ω–æ–ø–∫–∏
            if (!fullscreenPageBtn) {
                console.error('–ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
                return;
            }
            
            // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
            fullscreenPageBtn.addEventListener('click', (e) => {
                e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
                toggleFullscreen();
            });
            
            // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
            // –†–∞–∑–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
            document.addEventListener('fullscreenchange', onFullscreenChange);
            document.addEventListener('webkitfullscreenchange', onFullscreenChange); // Safari
            document.addEventListener('msfullscreenchange', onFullscreenChange); // IE
            document.addEventListener('mozfullscreenchange', onFullscreenChange); // –°—Ç–∞—Ä—ã–π Firefox
            
            // –°–ª—É—à–∞–µ–º –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ F11 (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
            document.addEventListener('keydown', (e) => {
                if (e.key === 'F11') {
                    // –î–∞–µ–º –±—Ä–∞—É–∑–µ—Ä—É –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å F11, –Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É
                    setTimeout(updateFullscreenButton, 100);
                }
                
                // –ö–ª–∞–≤–∏—à–∞ Escape –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
                if (e.key === 'Escape' && document.fullscreenElement) {
                    console.log('–í—ã—Ö–æ–¥ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø–æ Escape');
                    // –ù–µ –≤—ã–∑—ã–≤–∞–µ–º toggleFullscreen() - –±—Ä–∞—É–∑–µ—Ä —Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç Escape
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            updateFullscreenButton();
            
            console.log('‚úÖ –°–ª—É—à–∞—Ç–µ–ª–∏ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
            document.addEventListener('keydown', (e) => {
                if ((e.code === 'Space' || e.code === 'ArrowUp') && game.running && !player.isJumpHeld) {
                    startJump();
                    e.preventDefault();
                }
            });
            
            document.addEventListener('keyup', (e) => {
                if ((e.code === 'Space' || e.code === 'ArrowUp') && game.running && player.isJumpHeld) {
                    endJump();
                    e.preventDefault();
                }
            });
            
            // –ú—ã—à—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø—Ä—ã–∂–∫–∞
            jumpButton.addEventListener('mousedown', startJump);
            jumpButton.addEventListener('mouseup', endJump);
            jumpButton.addEventListener('mouseleave', () => {
                if (player.isJumpHeld) {
                    endJump();
                }
            });
            
            jumpButton.addEventListener('touchstart', (e) => {
                startJump();
                e.preventDefault();
            });
            
            jumpButton.addEventListener('touchend', (e) => {
                endJump();
                e.preventDefault();
            });
            
            // –ú—ã—à—å –¥–ª—è –∫–∞–Ω–≤–∞—Å–∞
            canvas.addEventListener('mousedown', startJump);
            canvas.addEventListener('mouseup', endJump);
            canvas.addEventListener('mouseleave', () => {
                if (player.isJumpHeld) {
                    endJump();
                }
            });
            
            canvas.addEventListener('touchstart', (e) => {
                startJump();
                e.preventDefault();
            });
            
            canvas.addEventListener('touchend', (e) => {
                endJump();
                e.preventDefault();
            });
            
            // –ö–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            startButton.addEventListener('click', startGame);
            restartButton.addEventListener('click', restartGame);
            
            window.addEventListener('resize', resizeCanvas);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
            addFullscreenEventListeners();
        }

        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–Ω–≤–∞—Å–∞
        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            
            const scaleInfo = calculateCurrentScale();
            game.currentScale = scaleInfo.scale;
            game.gameWidth = scaleInfo.width;
            game.gameHeight = scaleInfo.height;
            
            canvas.width = game.gameWidth;
            canvas.height = game.gameHeight;
            
            canvas.style.width = `${game.gameWidth}px`;
            canvas.style.height = `${game.gameHeight}px`;
            
            updateMountainsScale();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
            player.x = GAME_CONFIG.playerX; // –ò—Å–ø–æ–ª—å–∑—É–µ–º getter –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
            
            if (player.y === 0 || !game.running) {
                player.y = game.gameHeight * 0.65 - player.height / 2;
            } else {
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º Y –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã—Å–æ—Ç—ã —ç–∫—Ä–∞–Ω–∞
                const groundY = getGroundHeightAt(player.x);
                if (player.y > groundY - player.height / 2) {
                    player.y = groundY - player.height / 2;
                }
            }
            
            // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –ø—Ä—ã–∂–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            const isMobile = isMobileDevice();
            
            if (isMobile || window.innerHeight > window.innerWidth) {
                jumpButton.style.bottom = '10vh';
                jumpButton.style.width = '80px';
                jumpButton.style.height = '80px';
                jumpButton.style.fontSize = '16px';
            } else {
                jumpButton.style.bottom = '30px';
                jumpButton.style.right = '30px';
                jumpButton.style.width = '120px';
                jumpButton.style.height = '120px';
                jumpButton.style.fontSize = '22px';
            }
        }

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            game.running = true;
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            game.score = 0;
            game.speed = GAME_CONFIG.baseSpeed;
            game.gameTime = 0;
            game.distanceSinceLastObstacle = 0;
            game.animationTime = 0;
            game.currentSpeedIncreaseRate = GAME_CONFIG.speedIncreaseRate;
            game.spriteFrame = 0;
            game.spriteTimer = 0;
            
            game.currentDifficulty.obstacleChance = GAME_CONFIG.difficulty.initialObstacleChance;
            game.currentDifficulty.minDistance = GAME_CONFIG.difficulty.initialMinDistance;
            
            // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞
            player.x = GAME_CONFIG.playerX;
            player.y = game.gameHeight * 0.65 - player.height / 2;
            player.vy = 0;
            player.isJumping = false;
            player.isJumpHeld = false;
            player.rotation = 0;
            player.jumpType = 'short';
            
            obstacles = [];
            particles = [];
            
            initStars();         // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∑–≤—ë–∑–¥—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è —ç–∫—Ä–∞–Ω–∞
            initClouds();        // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±–ª–∞–∫–∞ –ø—Ä–∏ –Ω–æ–≤–æ–π –∏–≥—Ä–µ
            initTerrain();
            updateMountainsScale();
        }

        // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
        function gameOver() {
            game.running = false;
            
            let currentScore = Math.floor(game.score);
            if (currentScore > game.highScore) {
                game.highScore = currentScore;
                localStorage.setItem('snowride_highscore', game.highScore);
                highScoreElement.textContent = game.highScore;
                bestScoreElement.textContent = game.highScore;
            }
            
            finalScoreElement.textContent = currentScore;
            gameOverScreen.style.display = 'flex';
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            startGame();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = init;
    </script>
</body>
</html>